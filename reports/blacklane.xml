<?xml version="1.0" encoding="UTF-8"?><testsuite name="nosetests" tests="262" errors="4" failures="122" skip="0"><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_all_assets" time="0.237"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_all_assets_locale_1_en" time="0.145"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_all_assets_locale_2_fr" time="0.154"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_all_assets_locale_3_de" time="0.155"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_cancellation_policy" time="0.167"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_logo_url" time="0.172"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_specific_vehicle_1_business_class" time="0.167"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_specific_vehicle_2_first_class" time="0.187"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_specific_vehicle_3_economy" time="0.172"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_specific_vehicle_4_business_van" time="0.203"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_tos_url" time="0.136"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_vehicle_types" time="0.164"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_vehicle_types_locale_1_en" time="0.142"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_vehicle_types_locale_2_fr" time="0.143"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_assets.TestBlacklaneAssets" name="test_get_vehicle_types_locale_3_de" time="0.175"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_error_grant_type_invalid" time="0.126"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_error_oauth_token_invalid_client_id" time="0.173"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_error_oauth_token_invalid_client_secret" time="0.182"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_error_oauth_token_missing_client_id" time="0.154"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_error_oauth_token_missing_grant_type" time="0.130"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_error_oauth_token_missing_username" time="0.151"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_error_oauth_token_password_invalid" time="0.275"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_error_oauth_token_username_invalid" time="0.213"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_new_client_token_is_generated_every_time" time="0.389"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_new_password_token_is_generated_every_time" time="0.570"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_new_token_expires_in_aprox_15555600_seconds" time="0.263"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_oauth_token_client_credentials_result_keys" time="0.216"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_oauth_token_client_credentials_valid_params" time="0.218"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_oauth_token_password_result_keys" time="0.261"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_auth.TestBlacklanePOSTAuth" name="test_oauth_token_password_valid_params" time="0.279"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_error_booking_identifier_conflict_1_external_id" time="0.110"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_error_booking_identifier_conflict_2_booking_number" time="0.088"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_error_booking_identifier_missing" time="0.110"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_error_booking_not_found_1_uuid" time="0.143"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_error_booking_not_found_2_external_id" time="0.147"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_error_booking_not_found_3_booking_number" time="0.151"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_get_guest_booking_details_by_booking_number" time="3.182"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X GET -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095815-13122019-0%40example.com&amp;credit_card_number=4111111111111111&amp;credit_card_holder=Radisch&amp;passenger_title=ms&amp;service_type=transfer&amp;passenger_first_name=Dennis&amp;vehicle_type=first_class&amp;credit_card_expiry_year=2024&amp;passenger_mobile=%2B491701234567&amp;depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&amp;credit_card_cvv=123&amp;pickup_address=Kronprinzessinnenweg+250%2C+14109+Berlin%2C+Berlin&amp;passenger_last_name=Dennis&amp;dropoff_address=Friedrichstra%C3%9Fe+58%2C+10117+Berlin%2C+Berlin&amp;credit_card_expiry_month=03&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;: Setting up next sequence (0)&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=0&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095815-13122019-0@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='03')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095815-13122019-0@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='03')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_booking_details.py", line 106, in test_get_guest_booking_details_by_booking_number
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095815-13122019-0%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=ms&service_type=transfer&passenger_first_name=Dennis&vehicle_type=first_class&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Kronprinzessinnenweg+250%2C+14109+Berlin%2C+Berlin&passenger_last_name=Dennis&dropoff_address=Friedrichstra%C3%9Fe+58%2C+10117+Berlin%2C+Berlin&credit_card_expiry_month=03


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsFactory'>: Setting up next sequence (0)
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=0
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095815-13122019-0@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='03')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095815-13122019-0@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='03')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095815-13122019-0%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=ms&service_type=transfer&passenger_first_name=Dennis&vehicle_type=first_class&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Kronprinzessinnenweg+250%2C+14109+Berlin%2C+Berlin&passenger_last_name=Dennis&dropoff_address=Friedrichstra%C3%9Fe+58%2C+10117+Berlin%2C+Berlin&credit_card_expiry_month=03


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_get_guest_booking_details_by_external_id" time="3.411"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X GET -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095818-13122019-1%40example.com&amp;credit_card_number=4111111111111111&amp;credit_card_holder=Radisch&amp;passenger_title=mr&amp;service_type=hourly&amp;passenger_first_name=Dennis&amp;vehicle_type=business_van&amp;credit_card_expiry_year=2024&amp;duration=25200&amp;passenger_mobile=%2B491701234567&amp;depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&amp;credit_card_cvv=123&amp;pickup_address=Oranienstra%C3%9Fe+20%2C+10999+Berlin%2C+Berlin&amp;passenger_last_name=Dennis&amp;external_id=dys3q095818-13122019&amp;credit_card_expiry_month=03&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=1&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095818-13122019-1@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=25200, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='03')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095818-13122019-1@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=25200, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='03')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_booking_details.py", line 115, in test_get_guest_booking_details_by_external_id
    booking_response = self.get_booking_response_result(hourly_booking, external_id=True)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095818-13122019-1%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=hourly&passenger_first_name=Dennis&vehicle_type=business_van&credit_card_expiry_year=2024&duration=25200&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Oranienstra%C3%9Fe+20%2C+10999+Berlin%2C+Berlin&passenger_last_name=Dennis&external_id=dys3q095818-13122019&credit_card_expiry_month=03


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=1
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095818-13122019-1@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=25200, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='03')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095818-13122019-1@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=25200, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='03')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095818-13122019-1%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=hourly&passenger_first_name=Dennis&vehicle_type=business_van&credit_card_expiry_year=2024&duration=25200&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Oranienstra%C3%9Fe+20%2C+10999+Berlin%2C+Berlin&passenger_last_name=Dennis&external_id=dys3q095818-13122019&credit_card_expiry_month=03


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_get_guest_booking_details_by_uuid" time="4.065"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X GET -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095822-13122019-2%40example.com&amp;credit_card_number=4111111111111111&amp;credit_card_holder=Radisch&amp;passenger_title=mr&amp;service_type=transfer&amp;passenger_first_name=Dennis&amp;vehicle_type=first_class&amp;credit_card_expiry_year=2024&amp;passenger_mobile=%2B491701234567&amp;depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&amp;credit_card_cvv=123&amp;pickup_address=Flughafen+1%2C+12529+Berlin&amp;passenger_last_name=Dennis&amp;dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&amp;credit_card_expiry_month=04&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=2&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095822-13122019-2@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095822-13122019-2@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_booking_details.py", line 44, in test_get_guest_booking_details_by_uuid
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095822-13122019-2%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=transfer&passenger_first_name=Dennis&vehicle_type=first_class&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Flughafen+1%2C+12529+Berlin&passenger_last_name=Dennis&dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&credit_card_expiry_month=04


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=2
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095822-13122019-2@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095822-13122019-2@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095822-13122019-2%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=transfer&passenger_first_name=Dennis&vehicle_type=first_class&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Flughafen+1%2C+12529+Berlin&passenger_last_name=Dennis&dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&credit_card_expiry_month=04


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_get_guest_booking_price_items_base_price" time="2.971"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X GET -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095826-13122019-3%40example.com&amp;credit_card_number=4111111111111111&amp;credit_card_holder=Radisch&amp;passenger_title=ms&amp;service_type=transfer&amp;passenger_first_name=Dennis&amp;vehicle_type=first_class&amp;credit_card_expiry_year=2024&amp;passenger_mobile=%2B491701234567&amp;depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&amp;credit_card_cvv=123&amp;pickup_address=Oranienstra%C3%9Fe+20%2C+10999+Berlin%2C+Berlin&amp;passenger_last_name=Dennis&amp;dropoff_address=Kronprinzessinnenweg+250%2C+14109+Berlin%2C+Berlin&amp;credit_card_expiry_month=06&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=3&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095826-13122019-3@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095826-13122019-3@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_booking_details.py", line 83, in test_get_guest_booking_price_items_base_price
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095826-13122019-3%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=ms&service_type=transfer&passenger_first_name=Dennis&vehicle_type=first_class&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Oranienstra%C3%9Fe+20%2C+10999+Berlin%2C+Berlin&passenger_last_name=Dennis&dropoff_address=Kronprinzessinnenweg+250%2C+14109+Berlin%2C+Berlin&credit_card_expiry_month=06


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=3
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095826-13122019-3@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095826-13122019-3@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095826-13122019-3%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=ms&service_type=transfer&passenger_first_name=Dennis&vehicle_type=first_class&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Oranienstra%C3%9Fe+20%2C+10999+Berlin%2C+Berlin&passenger_last_name=Dennis&dropoff_address=Kronprinzessinnenweg+250%2C+14109+Berlin%2C+Berlin&credit_card_expiry_month=06


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_get_guest_booking_price_items_in_response" time="2.930"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X GET -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095829-13122019-4%40example.com&amp;credit_card_number=4111111111111111&amp;credit_card_holder=Radisch&amp;passenger_title=mr&amp;service_type=transfer&amp;passenger_first_name=Dennis&amp;vehicle_type=business_van&amp;credit_card_expiry_year=2024&amp;passenger_mobile=%2B491701234567&amp;depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&amp;credit_card_cvv=123&amp;pickup_address=Friedrichstra%C3%9Fe+58%2C+10117+Berlin%2C+Berlin&amp;passenger_last_name=Dennis&amp;dropoff_address=Kronprinzessinnenweg+250%2C+14109+Berlin%2C+Berlin&amp;credit_card_expiry_month=01&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=4&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095829-13122019-4@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='01')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095829-13122019-4@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='01')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_booking_details.py", line 53, in test_get_guest_booking_price_items_in_response
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095829-13122019-4%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=transfer&passenger_first_name=Dennis&vehicle_type=business_van&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Friedrichstra%C3%9Fe+58%2C+10117+Berlin%2C+Berlin&passenger_last_name=Dennis&dropoff_address=Kronprinzessinnenweg+250%2C+14109+Berlin%2C+Berlin&credit_card_expiry_month=01


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=4
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095829-13122019-4@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='01')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095829-13122019-4@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='01')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095829-13122019-4%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=transfer&passenger_first_name=Dennis&vehicle_type=business_van&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Friedrichstra%C3%9Fe+58%2C+10117+Berlin%2C+Berlin&passenger_last_name=Dennis&dropoff_address=Kronprinzessinnenweg+250%2C+14109+Berlin%2C+Berlin&credit_card_expiry_month=01


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_get_guest_booking_price_items_voucher" time="3.013"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X GET -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095832-13122019-5%40example.com&amp;credit_card_number=4111111111111111&amp;credit_card_holder=Radisch&amp;passenger_title=mr&amp;service_type=transfer&amp;passenger_first_name=Dennis&amp;vehicle_type=business_class&amp;credit_card_expiry_year=2024&amp;passenger_mobile=%2B491701234567&amp;depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&amp;credit_card_cvv=123&amp;pickup_address=Popitzweg+59%2C+13629+Berlin%2C+Germany&amp;passenger_last_name=Dennis&amp;dropoff_address=Oranienstra%C3%9Fe+20%2C+10999+Berlin%2C+Berlin&amp;voucher_code=50PERCENT&amp;credit_card_expiry_month=07&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'voucher_code': '50PERCENT'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, voucher_code='50PERCENT', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=5&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095832-13122019-5@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='50PERCENT', credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095832-13122019-5@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='50PERCENT', credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_booking_details.py", line 95, in test_get_guest_booking_price_items_voucher
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095832-13122019-5%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=transfer&passenger_first_name=Dennis&vehicle_type=business_class&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Popitzweg+59%2C+13629+Berlin%2C+Germany&passenger_last_name=Dennis&dropoff_address=Oranienstra%C3%9Fe+20%2C+10999+Berlin%2C+Berlin&voucher_code=50PERCENT&credit_card_expiry_month=07


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'voucher_code': '50PERCENT'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, voucher_code='50PERCENT', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=5
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095832-13122019-5@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='50PERCENT', credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095832-13122019-5@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='50PERCENT', credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095832-13122019-5%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=transfer&passenger_first_name=Dennis&vehicle_type=business_class&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Popitzweg+59%2C+13629+Berlin%2C+Germany&passenger_last_name=Dennis&dropoff_address=Oranienstra%C3%9Fe+20%2C+10999+Berlin%2C+Berlin&voucher_code=50PERCENT&credit_card_expiry_month=07


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_get_trusted_user_booking_details_by_external_id" time="2.868"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X GET -H &quot;Authorization: Bearer LaK4ulEWo5FyoItopypY2T8sC1cyMvwS&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095835-13122019-0%40example.com&amp;pickup_longitude=13.1896&amp;credit_card_number=4111111111111111&amp;credit_card_holder=Radisch&amp;dropoff_latitude=52.484821&amp;passenger_title=mr&amp;service_type=transfer&amp;passenger_first_name=Dennis&amp;vehicle_type=business_class&amp;depart_at=2020-02-03T02%3A54%3A32&amp;pickup_latitude=52.537211&amp;passenger_mobile=%2B491701234567&amp;credit_card_expiry_year=2024&amp;credit_card_cvv=123&amp;pickup_address=Seegefelder+Str.+54%2C+13583+Berlin%2C+Berlin&amp;passenger_last_name=Dennis&amp;external_id=wdboh095835-13122019&amp;credit_card_expiry_month=04&amp;dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&amp;dropoff_longitude=13.357213&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.BookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.BookingsTransferFactory'&gt;: Setting up next sequence (0)&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e438&gt;&gt;, dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=0&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095835-13122019-0@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='mr', service_type='transfer', dropoff_longitude='13.357213', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095835-13122019-0@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='mr', credit_card_expiry_month='04', service_type='transfer', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_booking_details.py", line 129, in test_get_trusted_user_booking_details_by_external_id
    booking_response = self.get_booking_response_result(transfer_booking, external_id=True)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X GET -H "Authorization: Bearer LaK4ulEWo5FyoItopypY2T8sC1cyMvwS" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095835-13122019-0%40example.com&pickup_longitude=13.1896&credit_card_number=4111111111111111&credit_card_holder=Radisch&dropoff_latitude=52.484821&passenger_title=mr&service_type=transfer&passenger_first_name=Dennis&vehicle_type=business_class&depart_at=2020-02-03T02%3A54%3A32&pickup_latitude=52.537211&passenger_mobile=%2B491701234567&credit_card_expiry_year=2024&credit_card_cvv=123&pickup_address=Seegefelder+Str.+54%2C+13583+Berlin%2C+Berlin&passenger_last_name=Dennis&external_id=wdboh095835-13122019&credit_card_expiry_month=04&dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&dropoff_longitude=13.357213


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.amadeus.bookings_factory.BookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.BookingsTransferFactory'>: Setting up next sequence (0)
factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>, service_type='transfer', passenger_first_name='Dennis', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e438>>, dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=0
factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095835-13122019-0@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='mr', service_type='transfer', dropoff_longitude='13.357213', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095835-13122019-0@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='mr', credit_card_expiry_month='04', service_type='transfer', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X GET -H "Authorization: Bearer LaK4ulEWo5FyoItopypY2T8sC1cyMvwS" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095835-13122019-0%40example.com&pickup_longitude=13.1896&credit_card_number=4111111111111111&credit_card_holder=Radisch&dropoff_latitude=52.484821&passenger_title=mr&service_type=transfer&passenger_first_name=Dennis&vehicle_type=business_class&depart_at=2020-02-03T02%3A54%3A32&pickup_latitude=52.537211&passenger_mobile=%2B491701234567&credit_card_expiry_year=2024&credit_card_cvv=123&pickup_address=Seegefelder+Str.+54%2C+13583+Berlin%2C+Berlin&passenger_last_name=Dennis&external_id=wdboh095835-13122019&credit_card_expiry_month=04&dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&dropoff_longitude=13.357213


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_hourly_booking_items" time="3.076"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X GET -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095838-13122019-6%40example.com&amp;credit_card_number=4111111111111111&amp;credit_card_holder=Radisch&amp;passenger_title=mr&amp;service_type=hourly&amp;passenger_first_name=Dennis&amp;vehicle_type=business_van&amp;credit_card_expiry_year=2024&amp;duration=32400&amp;passenger_mobile=%2B491701234567&amp;depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&amp;credit_card_cvv=123&amp;pickup_address=Popitzweg+59%2C+13629+Berlin%2C+Germany&amp;passenger_last_name=Dennis&amp;credit_card_expiry_month=08&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=6&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095838-13122019-6@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=32400, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='08')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095838-13122019-6@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=32400, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='08')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_booking_details.py", line 73, in test_hourly_booking_items
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095838-13122019-6%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=hourly&passenger_first_name=Dennis&vehicle_type=business_van&credit_card_expiry_year=2024&duration=32400&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Popitzweg+59%2C+13629+Berlin%2C+Germany&passenger_last_name=Dennis&credit_card_expiry_month=08


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=6
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095838-13122019-6@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=32400, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='08')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095838-13122019-6@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=32400, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='08')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095838-13122019-6%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=hourly&passenger_first_name=Dennis&vehicle_type=business_van&credit_card_expiry_year=2024&duration=32400&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Popitzweg+59%2C+13629+Berlin%2C+Germany&passenger_last_name=Dennis&credit_card_expiry_month=08


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_booking_details.TestBlacklaneBookingDetails" name="test_transfer_booking_items" time="2.970"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X GET -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095841-13122019-7%40example.com&amp;credit_card_number=4111111111111111&amp;credit_card_holder=Radisch&amp;passenger_title=mr&amp;service_type=transfer&amp;passenger_first_name=Dennis&amp;vehicle_type=first_class&amp;credit_card_expiry_year=2024&amp;passenger_mobile=%2B491701234567&amp;depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&amp;credit_card_cvv=123&amp;pickup_address=Flughafen+1%2C+12529+Berlin&amp;passenger_last_name=Dennis&amp;dropoff_address=Friedrichstra%C3%9Fe+58%2C+10117+Berlin%2C+Berlin&amp;credit_card_expiry_month=07&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=7&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095841-13122019-7@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095841-13122019-7@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_booking_details.py", line 63, in test_transfer_booking_items
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095841-13122019-7%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=transfer&passenger_first_name=Dennis&vehicle_type=first_class&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Flughafen+1%2C+12529+Berlin&passenger_last_name=Dennis&dropoff_address=Friedrichstra%C3%9Fe+58%2C+10117+Berlin%2C+Berlin&credit_card_expiry_month=07


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=7
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095841-13122019-7@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095841-13122019-7@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings?passenger_email=QA-095841-13122019-7%40example.com&credit_card_number=4111111111111111&credit_card_holder=Radisch&passenger_title=mr&service_type=transfer&passenger_first_name=Dennis&vehicle_type=first_class&credit_card_expiry_year=2024&passenger_mobile=%2B491701234567&depart_at=2019-12-14T12%3A12%3A52%2B00%3A00&credit_card_cvv=123&pickup_address=Flughafen+1%2C+12529+Berlin&passenger_last_name=Dennis&dropoff_address=Friedrichstra%C3%9Fe+58%2C+10117+Berlin%2C+Berlin&credit_card_expiry_month=07


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_dropoff_conflict" time="1.169"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_pickup_conflict" time="1.191"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_service_type_invalid" time="1.115"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_transfer_area_not_covered_for_impossible_routes" time="3.083"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferFactory(extra={'dropoff_latitude': '13.394388', 'dropoff_address': 'Some beach in Nigeria', 'dropoff_longitude': '13.394388'})&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.BookingsTransferFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='13.394388', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e438&gt;&gt;, dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Some beach in Nigeria', dropoff_longitude='13.394388')&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=3&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095847-13122019-3@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='13.394388', passenger_title='ms', service_type='transfer', dropoff_longitude='13.394388', passenger_first_name='Dennis', vehicle_type='first_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Some beach in Nigeria', credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095847-13122019-3@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='13.394388', passenger_title='ms', credit_card_expiry_month='02', service_type='transfer', passenger_first_name='Dennis', vehicle_type='first_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Some beach in Nigeria', dropoff_longitude='13.394388')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 922, in test_error_transfer_area_not_covered_for_impossible_routes
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferFactory(extra={'dropoff_latitude': '13.394388', 'dropoff_address': 'Some beach in Nigeria', 'dropoff_longitude': '13.394388'})
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.amadeus.bookings_factory.BookingsTransferFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='13.394388', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>, service_type='transfer', passenger_first_name='Dennis', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e438>>, dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Some beach in Nigeria', dropoff_longitude='13.394388')
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=3
factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095847-13122019-3@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='13.394388', passenger_title='ms', service_type='transfer', dropoff_longitude='13.394388', passenger_first_name='Dennis', vehicle_type='first_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Some beach in Nigeria', credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095847-13122019-3@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='13.394388', passenger_title='ms', credit_card_expiry_month='02', service_type='transfer', passenger_first_name='Dennis', vehicle_type='first_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Some beach in Nigeria', dropoff_longitude='13.394388')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_transfer_area_not_covered_outside_business_district" time="3.177"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferLocationsNotCovered(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsTransferLocationsNotCovered'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.TransferLocationsNotCovered'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.TransferLocationsNotCovered'&gt;: Setting up next sequence (0)&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferLocationsNotCovered(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, pickup_longitude='25.347584', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='45.788708', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f2d0fd0&gt;&gt;, dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0518&gt;, pickup_latitude='43.657945', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0f60&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Strada Zorilor 10, Zimnicea, Teleorman County, Romania', passenger_last_name='Dennis', depart_at='2020-01-08T18:02:53', dropoff_address='Strada Transilvaniei 2, Sibiu, Romania', dropoff_longitude='24.141848')&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=0&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferLocationsNotCovered(passenger_email='QA-095850-13122019-0@example.com', pickup_longitude='25.347584', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='45.788708', passenger_title='mr', service_type='transfer', dropoff_longitude='24.141848', passenger_first_name='Dennis', vehicle_type='first_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0518&gt;, pickup_latitude='43.657945', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0f60&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Strada Zorilor 10, Zimnicea, Teleorman County, Romania', passenger_last_name='Dennis', depart_at='2020-01-08T18:02:53', dropoff_address='Strada Transilvaniei 2, Sibiu, Romania', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferLocationsNotCovered(passenger_email='QA-095850-13122019-0@example.com', pickup_longitude='25.347584', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='45.788708', passenger_title='mr', credit_card_expiry_month='11', service_type='transfer', passenger_first_name='Dennis', vehicle_type='first_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0518&gt;, pickup_latitude='43.657945', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0f60&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Strada Zorilor 10, Zimnicea, Teleorman County, Romania', passenger_last_name='Dennis', depart_at='2020-01-08T18:02:53', dropoff_address='Strada Transilvaniei 2, Sibiu, Romania', dropoff_longitude='24.141848')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 930, in test_error_transfer_area_not_covered_outside_business_district
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferLocationsNotCovered(extra={})
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsTransferLocationsNotCovered'>: reusing sequence from <class 'factories.amadeus.bookings_factory.TransferLocationsNotCovered'>
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.TransferLocationsNotCovered'>: Setting up next sequence (0)
factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferLocationsNotCovered(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, pickup_longitude='25.347584', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='45.788708', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>, service_type='transfer', passenger_first_name='Dennis', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f2d0fd0>>, dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0518>, pickup_latitude='43.657945', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0f60>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Strada Zorilor 10, Zimnicea, Teleorman County, Romania', passenger_last_name='Dennis', depart_at='2020-01-08T18:02:53', dropoff_address='Strada Transilvaniei 2, Sibiu, Romania', dropoff_longitude='24.141848')
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=0
factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferLocationsNotCovered(passenger_email='QA-095850-13122019-0@example.com', pickup_longitude='25.347584', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='45.788708', passenger_title='mr', service_type='transfer', dropoff_longitude='24.141848', passenger_first_name='Dennis', vehicle_type='first_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0518>, pickup_latitude='43.657945', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0f60>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Strada Zorilor 10, Zimnicea, Teleorman County, Romania', passenger_last_name='Dennis', depart_at='2020-01-08T18:02:53', dropoff_address='Strada Transilvaniei 2, Sibiu, Romania', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferLocationsNotCovered(passenger_email='QA-095850-13122019-0@example.com', pickup_longitude='25.347584', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='45.788708', passenger_title='mr', credit_card_expiry_month='11', service_type='transfer', passenger_first_name='Dennis', vehicle_type='first_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0518>, pickup_latitude='43.657945', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0f60>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Strada Zorilor 10, Zimnicea, Teleorman County, Romania', passenger_last_name='Dennis', depart_at='2020-01-08T18:02:53', dropoff_address='Strada Transilvaniei 2, Sibiu, Romania', dropoff_longitude='24.141848')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_transfer_dropoff_address_missing" time="1.050"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_transfer_dropoff_latitude_missing" time="1.065"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_transfer_dropoff_longitude_missing" time="1.144"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_transfer_pickup_address_missing" time="1.057"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_transfer_pickup_latitude_missing" time="1.188"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_error_transfer_pickup_longitude_missing" time="1.101"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_post_bookings_guest_hourly_address_and_coordinates" time="2.889"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.BookingsHourlyFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f2d0b00&gt;&gt;, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3ea70278&gt;&gt;, depart_at='2020-02-04T17:37:10', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=1&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095900-13122019-1@example.com', pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588&gt;, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=10800, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='01')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095900-13122019-1@example.com', pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588&gt;, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=10800, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='01')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 827, in test_post_bookings_guest_hourly_address_and_coordinates
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(extra={})
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.amadeus.bookings_factory.BookingsHourlyFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f2d0b00>>, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3ea70278>>, depart_at='2020-02-04T17:37:10', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=1
factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095900-13122019-1@example.com', pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588>, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=10800, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='01')
factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095900-13122019-1@example.com', pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588>, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=10800, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='01')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_post_bookings_guest_transfer_address_and_coordinates" time="2.869"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.BookingsTransferFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e438&gt;&gt;, dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=10&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095903-13122019-10@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='ms', service_type='transfer', dropoff_longitude='13.357213', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='12')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095903-13122019-10@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='ms', credit_card_expiry_month='12', service_type='transfer', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 821, in test_post_bookings_guest_transfer_address_and_coordinates
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.amadeus.bookings_factory.BookingsTransferFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>, service_type='transfer', passenger_first_name='Dennis', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e438>>, dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=10
factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095903-13122019-10@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='ms', service_type='transfer', dropoff_longitude='13.357213', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='12')
factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095903-13122019-10@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='ms', credit_card_expiry_month='12', service_type='transfer', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_post_bookings_hourly_coordinates_in_response" time="2.970"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.BookingsHourlyFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f2d0b00&gt;&gt;, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3ea70278&gt;&gt;, depart_at='2020-02-04T17:37:10', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=2&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095906-13122019-2@example.com', pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588&gt;, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=36000, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095906-13122019-2@example.com', pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588&gt;, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=36000, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 842, in test_post_bookings_hourly_coordinates_in_response
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(extra={})
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.amadeus.bookings_factory.BookingsHourlyFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f2d0b00>>, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3ea70278>>, depart_at='2020-02-04T17:37:10', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=2
factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095906-13122019-2@example.com', pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588>, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=36000, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095906-13122019-2@example.com', pickup_longitude='13.357213', credit_card_number=4111111111111111, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude='52.484821', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588>, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', duration=36000, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_post_bookings_hourly_iata" time="2.989"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsHourlyIata(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsHourlyIata'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.GuestBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.BookingsHourlyFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsHourlyIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, pickup_longitude=None, credit_card_number=4111111111111111, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f2f9710&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude=None, pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f2d0b00&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3ea70278&gt;&gt;, depart_at='2020-02-04T17:37:10', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=3&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-095909-13122019-3@example.com', pickup_longitude=None, credit_card_number=4111111111111111, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude=None, pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588&gt;, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', duration=14400, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='10')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-095909-13122019-3@example.com', pickup_longitude=None, credit_card_number=4111111111111111, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude=None, pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588&gt;, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', duration=14400, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='10')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 856, in test_post_bookings_hourly_iata
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsHourlyIata(extra={})
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsHourlyIata'>: reusing sequence from <class 'factories.amadeus.bookings_factory.GuestBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.amadeus.bookings_factory.BookingsHourlyFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsHourlyIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, pickup_longitude=None, credit_card_number=4111111111111111, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f2f9710>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude=None, pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f2d0b00>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3ea70278>>, depart_at='2020-02-04T17:37:10', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=3
factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-095909-13122019-3@example.com', pickup_longitude=None, credit_card_number=4111111111111111, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude=None, pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588>, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', duration=14400, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='10')
factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-095909-13122019-3@example.com', pickup_longitude=None, credit_card_number=4111111111111111, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_expiry_year=2024, pickup_latitude=None, pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f2d0588>, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', duration=14400, depart_at='2020-02-04T17:37:10', credit_card_expiry_month='10')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_post_bookings_transfer_coordinates_in_response" time="4.004"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.BookingsTransferFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e438&gt;&gt;, dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=11&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095912-13122019-11@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='ms', service_type='transfer', dropoff_longitude='13.357213', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='09')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095912-13122019-11@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='ms', credit_card_expiry_month='09', service_type='transfer', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude='52.537211', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 833, in test_post_bookings_transfer_coordinates_in_response
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.amadeus.bookings_factory.BookingsTransferFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>, service_type='transfer', passenger_first_name='Dennis', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e438>>, dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=11
factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095912-13122019-11@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='ms', service_type='transfer', dropoff_longitude='13.357213', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='09')
factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095912-13122019-11@example.com', pickup_longitude='13.1896', credit_card_number=4111111111111111, credit_card_holder='Radisch', dropoff_latitude='52.484821', passenger_title='ms', credit_card_expiry_month='09', service_type='transfer', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude='52.537211', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Seegefelder Str. 54, 13583 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2020-02-03T02:54:32', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', dropoff_longitude='13.357213')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestAthenaTrustedPOSTBookings" name="test_post_bookings_transfer_iata" time="3.073"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferIata(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.amadeus.bookings_factory.BookingsTransferFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f2f9f28&gt;&gt;, pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e438&gt;&gt;, passenger_last_name='Dennis', dropoff_latitude=None, dropoff_longitude=None, pickup_longitude=None, credit_card_number=4111111111111111, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f2f9b00&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_expiry_year=2024, dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude=None, credit_card_cvv='123', pickup_address=None, depart_at='2020-02-03T02:54:32', dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=12&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-095916-13122019-12@example.com', credit_card_holder='Radisch', pickup_airport_iata='SXF', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, passenger_last_name='Dennis', dropoff_latitude=None, dropoff_longitude=None, pickup_longitude=None, credit_card_number=4111111111111111, dropoff_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude=None, credit_card_cvv='123', pickup_address=None, depart_at='2020-02-03T02:54:32', dropoff_address=None, credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-095916-13122019-12@example.com', credit_card_holder='Radisch', pickup_airport_iata='SXF', pickup_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98&gt;, passenger_mobile='+491701234567', vehicle_type='business_class', passenger_last_name='Dennis', dropoff_latitude=None, dropoff_longitude=None, pickup_longitude=None, credit_card_number=4111111111111111, dropoff_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_expiry_year=2024, dropoff_pair=&lt;factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0&gt;, pickup_latitude=None, credit_card_cvv='123', pickup_address=None, depart_at='2020-02-03T02:54:32', dropoff_address=None, credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 850, in test_post_bookings_transfer_iata
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.amadeus.bookings_factory.GuestBookingsTransferIata(extra={})
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.amadeus.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.amadeus.bookings_factory.BookingsTransferFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.amadeus.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f2f9f28>>, pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e438>>, passenger_last_name='Dennis', dropoff_latitude=None, dropoff_longitude=None, pickup_longitude=None, credit_card_number=4111111111111111, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f2f9b00>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_expiry_year=2024, dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude=None, credit_card_cvv='123', pickup_address=None, depart_at='2020-02-03T02:54:32', dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=12
factory.containers: DEBUG: LazyStub: Computed values, got factories.amadeus.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-095916-13122019-12@example.com', credit_card_holder='Radisch', pickup_airport_iata='SXF', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, passenger_last_name='Dennis', dropoff_latitude=None, dropoff_longitude=None, pickup_longitude=None, credit_card_number=4111111111111111, dropoff_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', vehicle_type='business_class', dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude=None, credit_card_cvv='123', pickup_address=None, depart_at='2020-02-03T02:54:32', dropoff_address=None, credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.amadeus.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-095916-13122019-12@example.com', credit_card_holder='Radisch', pickup_airport_iata='SXF', pickup_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f32df98>, passenger_mobile='+491701234567', vehicle_type='business_class', passenger_last_name='Dennis', dropoff_latitude=None, dropoff_longitude=None, pickup_longitude=None, credit_card_number=4111111111111111, dropoff_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_expiry_year=2024, dropoff_pair=<factories.amadeus.bookings_factory.RandomCoordinatesPair object at 0x7f9e3f33ecc0>, pickup_latitude=None, credit_card_cvv='123', pickup_address=None, depart_at='2020-02-03T02:54:32', dropoff_address=None, credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_booking_number_in_response" time="2.855"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095919-13122019-8@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=8&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095919-13122019-8@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095919-13122019-8@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 312, in test_booking_number_in_response
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095919-13122019-8@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=8
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095919-13122019-8@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095919-13122019-8@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095919-13122019-8@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_corporation_uuid_precedence_over_voucher_no_cc" time="0.921"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_corporation_uuid_precedence_over_voucher_with_cc" time="3.007"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095923-13122019-10@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;corporation_uuid&quot;: &quot;a0b9d1b6-5207-4daf-bccc-648e1de33129&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;voucher_code&quot;: &quot;50PERCENT&quot;, &quot;credit_card_expiry_month&quot;: &quot;03&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'voucher_code': '50PERCENT', 'corporation_uuid': 'a0b9d1b6-5207-4daf-bccc-648e1de33129'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, voucher_code='50PERCENT', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=10&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095923-13122019-10@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='50PERCENT', credit_card_expiry_month='03')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095923-13122019-10@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='50PERCENT', credit_card_expiry_month='03')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 179, in test_corporation_uuid_precedence_over_voucher_with_cc
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095923-13122019-10@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "corporation_uuid": "a0b9d1b6-5207-4daf-bccc-648e1de33129", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "depart_at": "2019-12-14T12:12:52+00:00", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "voucher_code": "50PERCENT", "credit_card_expiry_month": "03"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'voucher_code': '50PERCENT', 'corporation_uuid': 'a0b9d1b6-5207-4daf-bccc-648e1de33129'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, voucher_code='50PERCENT', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=10
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095923-13122019-10@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='50PERCENT', credit_card_expiry_month='03')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095923-13122019-10@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='50PERCENT', credit_card_expiry_month='03')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095923-13122019-10@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "corporation_uuid": "a0b9d1b6-5207-4daf-bccc-648e1de33129", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "depart_at": "2019-12-14T12:12:52+00:00", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "voucher_code": "50PERCENT", "credit_card_expiry_month": "03"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_corporation_uuid_invalid" time="0.547"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_credit_card_expired_before_tour" time="3.012"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095926-13122019-12@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2021, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2023-01-16T09:34:20+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;08&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsCCExpiresBeforeDepart(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsCCExpiresBeforeDepart'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsCCExpiresBeforeDepart(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2021, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2023-01-16T09:34:20+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=12&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsCCExpiresBeforeDepart(passenger_email='QA-095926-13122019-12@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2021, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2023-01-16T09:34:20+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='08')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsCCExpiresBeforeDepart(passenger_email='QA-095926-13122019-12@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2021, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2023-01-16T09:34:20+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='08')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 652, in test_error_credit_card_expired_before_tour
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095926-13122019-12@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2021, "passenger_mobile": "+491701234567", "depart_at": "2023-01-16T09:34:20+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsCCExpiresBeforeDepart(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsCCExpiresBeforeDepart'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsCCExpiresBeforeDepart(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2021, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2023-01-16T09:34:20+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=12
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsCCExpiresBeforeDepart(passenger_email='QA-095926-13122019-12@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2021, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2023-01-16T09:34:20+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='08')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsCCExpiresBeforeDepart(passenger_email='QA-095926-13122019-12@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2021, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2023-01-16T09:34:20+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='08')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095926-13122019-12@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2021, "passenger_mobile": "+491701234567", "depart_at": "2023-01-16T09:34:20+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_credit_card_expired_in_the_past" time="0.333"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_credit_card_expiry_month_invalid" time="0.278"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_credit_card_expiry_month_missing" time="0.290"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_credit_card_expiry_year_invalid" time="0.256"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_credit_card_expiry_year_missing" time="0.299"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_credit_card_number_invalid" time="0.317"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_credit_card_number_missing" time="0.298"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_dropoff_conflict" time="1.264"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_dropoff_missing_for_untrusted" time="1.189"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_duration_invalid_impossible_division_by_3600" time="3.625"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095934-13122019-22@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 10000, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;04&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'duration': 10000})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=10000, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=22&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095934-13122019-22@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=10000, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095934-13122019-22@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=10000, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 689, in test_error_duration_invalid_impossible_division_by_3600
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095934-13122019-22@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 10000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'duration': 10000})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=10000, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=22
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095934-13122019-22@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=10000, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095934-13122019-22@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=10000, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095934-13122019-22@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 10000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_external_id_invalid" time="2.870"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095937-13122019-23@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;external_id&quot;: &quot;r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;credit_card_expiry_month&quot;: &quot;09&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': 'r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', external_id='r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=23&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095937-13122019-23@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', external_id='r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095937-13122019-23@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', external_id='r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 706, in test_error_external_id_invalid
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095937-13122019-23@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "external_id": "r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': 'r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', external_id='r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=23
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095937-13122019-23@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', external_id='r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095937-13122019-23@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', external_id='r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095937-13122019-23@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "external_id": "r8h12sxo6nu3wuh3661ddr5tt84updfwnndldmx0giuplegzyyrpq6m4z37lyl1tyhscmmnfkjz4kj5qa3tv22vnz8udihv2i0iaf6gshoitjowvgolpmm0pfd7j51ub0b5kohlkmhy5ygescpw8eb82ecbf6p2by2wguaiy4nadcsv377vlytyh59leg2vl00hoj3f5vikx5s5mdfw1iznsa9kktwsln7xchgyi2plewsv9cyomyi8jgbebt6o095937-13122019", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_external_id_invalid_characters_1_bla_bla" time="3.663"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095940-13122019-24@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;external_id&quot;: &quot;bla/bla&quot;, &quot;dropoff_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;08&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': 'bla/bla'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', external_id='bla/bla', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=24&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095940-13122019-24@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='bla/bla', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='08')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095940-13122019-24@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='bla/bla', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='08')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 715, in test_error_external_id_invalid_characters
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095940-13122019-24@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "external_id": "bla/bla", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': 'bla/bla'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', external_id='bla/bla', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=24
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095940-13122019-24@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='bla/bla', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='08')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095940-13122019-24@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='bla/bla', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='08')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095940-13122019-24@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "external_id": "bla/bla", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_external_id_invalid_characters_2__ÄN_ø" time="2.999"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095944-13122019-25@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;external_id&quot;: &quot;∫ÄN¥ø&quot;, &quot;dropoff_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;07&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': '∫ÄN¥ø'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', external_id='∫ÄN¥ø', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=25&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095944-13122019-25@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='∫ÄN¥ø', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095944-13122019-25@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='∫ÄN¥ø', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 715, in test_error_external_id_invalid_characters
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095944-13122019-25@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "external_id": "∫ÄN¥ø", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': '∫ÄN¥ø'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', external_id='∫ÄN¥ø', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=25
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095944-13122019-25@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='∫ÄN¥ø', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095944-13122019-25@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='∫ÄN¥ø', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095944-13122019-25@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "external_id": "∫ÄN¥ø", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_external_id_invalid_characters_3_py_thon" time="2.779"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095947-13122019-26@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;external_id&quot;: &quot;py thon&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;credit_card_expiry_month&quot;: &quot;04&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': 'py thon'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', external_id='py thon', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=26&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095947-13122019-26@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='py thon', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095947-13122019-26@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='py thon', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 715, in test_error_external_id_invalid_characters
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095947-13122019-26@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "external_id": "py thon", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': 'py thon'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', external_id='py thon', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=26
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095947-13122019-26@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='py thon', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095947-13122019-26@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', external_id='py thon', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095947-13122019-26@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "external_id": "py thon", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_external_id_invalid_when_id_not_unique" time="2.856"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095950-13122019-27@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;external_id&quot;: &quot;095950-13122019&quot;, &quot;dropoff_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': '095950-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', external_id='095950-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=27&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095950-13122019-27@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', external_id='095950-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095950-13122019-27@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', external_id='095950-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 724, in test_error_external_id_invalid_when_id_not_unique
    assert_that(self.api.code, equal_to(201))  # check that the first request was successful
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095950-13122019-27@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "external_id": "095950-13122019", "dropoff_address": "Feurigstraße 59, 10827 Berlin, Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': '095950-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', external_id='095950-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=27
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095950-13122019-27@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', external_id='095950-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095950-13122019-27@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', external_id='095950-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095950-13122019-27@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "external_id": "095950-13122019", "dropoff_address": "Feurigstraße 59, 10827 Berlin, Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_flight_number_missing" time="1.128"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_hourly_depart_at_in_the_past" time="2.837"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095954-13122019-29@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 21600, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2014-11-21T14:00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;05&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'depart_at': '2014-11-21T14:00:00'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=29&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095954-13122019-29@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', duration=21600, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', credit_card_expiry_month='05')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095954-13122019-29@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=21600, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', credit_card_expiry_month='05')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 569, in test_error_hourly_depart_at_in_the_past
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095954-13122019-29@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": 21600, "passenger_mobile": "+491701234567", "depart_at": "2014-11-21T14:00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "05"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'depart_at': '2014-11-21T14:00:00'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=29
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095954-13122019-29@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', duration=21600, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', credit_card_expiry_month='05')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-095954-13122019-29@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=21600, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', credit_card_expiry_month='05')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095954-13122019-29@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": 21600, "passenger_mobile": "+491701234567", "depart_at": "2014-11-21T14:00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "05"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_hourly_duration_missing" time="1.105"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_luggage_count_invalid_when_negative" time="2.886"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-095957-13122019-31@example.com&quot;, &quot;luggage_count&quot;: -2, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;02&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'luggage_count': -2})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, luggage_count=-2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=31&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095957-13122019-31@example.com', luggage_count=-2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095957-13122019-31@example.com', luggage_count=-2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='02')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 405, in test_error_luggage_count_invalid_when_negative
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095957-13122019-31@example.com", "luggage_count": -2, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'luggage_count': -2})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, luggage_count=-2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=31
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095957-13122019-31@example.com', luggage_count=-2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-095957-13122019-31@example.com', luggage_count=-2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='02')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-095957-13122019-31@example.com", "luggage_count": -2, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_luggage_count_invalid_when_over_limit_business_van" time="4.509"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100000-13122019-32@example.com&quot;, &quot;luggage_count&quot;: 6, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;03&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'luggage_count': 6, 'vehicle_type': 'business_van'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, luggage_count=6, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=32&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100000-13122019-32@example.com', luggage_count=6, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='03')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100000-13122019-32@example.com', luggage_count=6, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='03')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 432, in test_error_luggage_count_invalid_when_over_limit_business_van
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100000-13122019-32@example.com", "luggage_count": 6, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "03"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'luggage_count': 6, 'vehicle_type': 'business_van'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, luggage_count=6, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=32
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100000-13122019-32@example.com', luggage_count=6, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='03')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100000-13122019-32@example.com', luggage_count=6, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='03')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100000-13122019-32@example.com", "luggage_count": 6, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "03"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_passenger_count_invalid_when_negative" time="2.902"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100005-13122019-33@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;dropoff_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;passenger_count&quot;: -2, &quot;credit_card_expiry_month&quot;: &quot;12&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_count': -2})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=-2, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=33&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100005-13122019-33@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=-2, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='12')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100005-13122019-33@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=-2, credit_card_expiry_month='12')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 397, in test_error_passenger_count_invalid_when_negative
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100005-13122019-33@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "passenger_count": -2, "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_count': -2})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=-2, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=33
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100005-13122019-33@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=-2, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='12')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100005-13122019-33@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=-2, credit_card_expiry_month='12')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100005-13122019-33@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "passenger_count": -2, "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_passenger_count_invalid_when_over_limit_business_class" time="2.898"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100008-13122019-34@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;dropoff_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;passenger_count&quot;: 4, &quot;credit_card_expiry_month&quot;: &quot;04&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_count': 4, 'vehicle_type': 'business_class'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=4, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=34&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100008-13122019-34@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=4, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100008-13122019-34@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=4, credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 414, in test_error_passenger_count_invalid_when_over_limit_business_class
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100008-13122019-34@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "passenger_count": 4, "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_count': 4, 'vehicle_type': 'business_class'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=4, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=34
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100008-13122019-34@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=4, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100008-13122019-34@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=4, credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100008-13122019-34@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "passenger_count": 4, "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_passenger_count_invalid_when_over_limit_first_class" time="2.914"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100011-13122019-35@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;dropoff_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;passenger_count&quot;: 4, &quot;credit_card_expiry_month&quot;: &quot;02&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_count': 4, 'vehicle_type': 'first_class'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=4, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=35&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100011-13122019-35@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=4, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100011-13122019-35@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=4, credit_card_expiry_month='02')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 423, in test_error_passenger_count_invalid_when_over_limit_first_class
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100011-13122019-35@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "dropoff_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "passenger_count": 4, "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_count': 4, 'vehicle_type': 'first_class'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=4, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=35
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100011-13122019-35@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=4, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100011-13122019-35@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=4, credit_card_expiry_month='02')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100011-13122019-35@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "dropoff_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "passenger_count": 4, "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_passenger_count_invalid_when_send_a_string" time="3.175"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100014-13122019-36@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;passenger_count&quot;: &quot;string&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_count': 'string'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count='string', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=36&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100014-13122019-36@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count='string', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100014-13122019-36@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count='string', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 440, in test_error_passenger_count_invalid_when_send_a_string
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100014-13122019-36@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "passenger_count": "string", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_count': 'string'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count='string', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=36
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100014-13122019-36@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count='string', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100014-13122019-36@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count='string', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100014-13122019-36@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "passenger_count": "string", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_passenger_language_invalid" time="0.208"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_pickup_conflict" time="1.227"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_pickup_conflict_case_2_untrusted_1___pickup_airport_iata____TXL__" time="1.218"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_pickup_conflict_case_2_untrusted_2___pickup_address____Feurigstrasse_59__10827_Berlin__" time="1.206"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_pickup_missing_for_untrusted_case2" time="1.184"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_pickup_missing_for_untrusted_case_1" time="1.257"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_depart_at_invalid" time="1.242"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_depart_at_missing" time="1.024"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_guest_passenger_email_invalid" time="0.181"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_guest_passenger_email_missing" time="0.142"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_guest_passenger_first_name_missing" time="0.166"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_guest_passenger_last_name_missing" time="0.177"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_guest_passenger_mobile_invalid" time="0.162"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_guest_passenger_mobile_missing" time="0.106"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_guest_passenger_title_invalid" time="0.148"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_guest_passenger_title_missing" time="0.123"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_post_bookings_missing_token" time="0.097"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_transfer_depart_at_in_the_past" time="2.999"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100027-13122019-54@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2014-11-21T14:00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;04&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'depart_at': '2014-11-21T14:00:00'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=54&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100027-13122019-54@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100027-13122019-54@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 559, in test_error_transfer_depart_at_in_the_past
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100027-13122019-54@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2014-11-21T14:00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'depart_at': '2014-11-21T14:00:00'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=54
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100027-13122019-54@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100027-13122019-54@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2014-11-21T14:00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100027-13122019-54@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2014-11-21T14:00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_transfer_passenger_first_name_invalid" time="0.158"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_transfer_passenger_last_name_invalid" time="0.177"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_vehicle_type_invalid" time="2.840"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100030-13122019-57@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;xxx&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;credit_card_expiry_month&quot;: &quot;02&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'vehicle_type': 'xxx'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='xxx', credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=57&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100030-13122019-57@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='xxx', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100030-13122019-57@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='xxx', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='02')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 587, in test_error_vehicle_type_invalid
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100030-13122019-57@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "xxx", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'vehicle_type': 'xxx'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='xxx', credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=57
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100030-13122019-57@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='xxx', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100030-13122019-57@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='xxx', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='02')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100030-13122019-57@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "xxx", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_vehicle_type_invalid_for_location" time="2.969"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;422&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100033-13122019-58@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;dropoff_airport_iata&quot;: &quot;GIG&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Av. Atlântica, 4240 - Copacabana, Rio de Janeiro - RJ, 22070-002, Brazil&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'dropoff_airport_iata': 'GIG', 'dropoff_address': None, 'vehicle_type': 'first_class', 'pickup_address': &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3e866630&gt;})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', dropoff_airport_iata='GIG', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3e866630&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=58&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100033-13122019-58@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='GIG', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Av. Atlântica, 4240 - Copacabana, Rio de Janeiro - RJ, 22070-002, Brazil', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100033-13122019-58@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', dropoff_airport_iata='GIG', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Av. Atlântica, 4240 - Copacabana, Rio de Janeiro - RJ, 22070-002, Brazil', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 681, in test_error_vehicle_type_invalid_for_location
    assert_that(self.api.code, equal_to(422))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <422>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100033-13122019-58@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "dropoff_airport_iata": "GIG", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Av. Atlântica, 4240 - Copacabana, Rio de Janeiro - RJ, 22070-002, Brazil", "passenger_last_name": "Dennis", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'dropoff_airport_iata': 'GIG', 'dropoff_address': None, 'vehicle_type': 'first_class', 'pickup_address': <factory.fuzzy.FuzzyChoice object at 0x7f9e3e866630>})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', dropoff_airport_iata='GIG', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3e866630>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=58
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100033-13122019-58@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='GIG', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Av. Atlântica, 4240 - Copacabana, Rio de Janeiro - RJ, 22070-002, Brazil', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100033-13122019-58@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', dropoff_airport_iata='GIG', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Av. Atlântica, 4240 - Copacabana, Rio de Janeiro - RJ, 22070-002, Brazil', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100033-13122019-58@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "dropoff_airport_iata": "GIG", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Av. Atlântica, 4240 - Copacabana, Rio de Janeiro - RJ, 22070-002, Brazil", "passenger_last_name": "Dennis", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_error_vehicle_type_missing" time="0.988"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_external_id_in_response_if_sent" time="3.057"><error type="builtins.KeyError" message="'result'&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100037-13122019-60@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;external_id&quot;: &quot;omvcx100037-13122019&quot;, &quot;dropoff_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;01&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': 'omvcx100037-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', external_id='omvcx100037-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=60&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100037-13122019-60@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', external_id='omvcx100037-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='01')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100037-13122019-60@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', external_id='omvcx100037-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='01')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 698, in test_external_id_in_response_if_sent
    assert_that(self.api.get_response_root(RESULT), has_entries(
  File "/app/api_call.py", line 82, in get_response_root
    return self.response[root]
'result'
-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100037-13122019-60@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "external_id": "omvcx100037-13122019", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "01"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'external_id': 'omvcx100037-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', external_id='omvcx100037-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=60
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100037-13122019-60@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', external_id='omvcx100037-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='01')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100037-13122019-60@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', external_id='omvcx100037-13122019', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='01')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></error><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100037-13122019-60@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "external_id": "omvcx100037-13122019", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "01"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_fixed_rebate_or_markup_hourly_1__NT_uuid__b3e04fc1_b1b8_4780_8de8_a5ba68fa73b2___name__CorporationFixedRebate30____3000_" time="3.127"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100040-13122019-61@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 14400, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Berliner Allee 55, 30175 Hannover, Niedersachse&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'duration': 14400, 'pickup_address': 'Berliner Allee 55, 30175 Hannover, Niedersachse'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=14400, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=61&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100040-13122019-61@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', duration=14400, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100040-13122019-61@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=14400, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 233, in test_fixed_rebate_or_markup_hourly
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100040-13122019-61@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": 14400, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Berliner Allee 55, 30175 Hannover, Niedersachse", "passenger_last_name": "Dennis", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'duration': 14400, 'pickup_address': 'Berliner Allee 55, 30175 Hannover, Niedersachse'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=14400, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=61
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100040-13122019-61@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', duration=14400, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100040-13122019-61@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=14400, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100040-13122019-61@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": 14400, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Berliner Allee 55, 30175 Hannover, Niedersachse", "passenger_last_name": "Dennis", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_fixed_rebate_or_markup_hourly_2__NT_uuid__de457330_39ae_43ae_a7b7_1338b288be3e___name__CorporationFixedMarkup30_____3000_" time="2.969"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100043-13122019-62@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 14400, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Berliner Allee 55, 30175 Hannover, Niedersachse&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'duration': 14400, 'pickup_address': 'Berliner Allee 55, 30175 Hannover, Niedersachse'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=14400, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=62&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100043-13122019-62@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', duration=14400, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100043-13122019-62@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=14400, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 233, in test_fixed_rebate_or_markup_hourly
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100043-13122019-62@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "duration": 14400, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Berliner Allee 55, 30175 Hannover, Niedersachse", "passenger_last_name": "Dennis", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'duration': 14400, 'pickup_address': 'Berliner Allee 55, 30175 Hannover, Niedersachse'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=14400, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=62
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100043-13122019-62@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', duration=14400, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100043-13122019-62@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=14400, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Berliner Allee 55, 30175 Hannover, Niedersachse', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100043-13122019-62@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "duration": 14400, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Berliner Allee 55, 30175 Hannover, Niedersachse", "passenger_last_name": "Dennis", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_passenger_count_and_luggage_count_fields_values" time="2.875"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100046-13122019-63@example.com&quot;, &quot;luggage_count&quot;: 2, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;passenger_count&quot;: 2, &quot;credit_card_expiry_month&quot;: &quot;10&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'luggage_count': 2, 'passenger_count': 2})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, luggage_count=2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=2, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=63&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100046-13122019-63@example.com', luggage_count=2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_count=2, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='10')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100046-13122019-63@example.com', luggage_count=2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=2, credit_card_expiry_month='10')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 386, in test_passenger_count_and_luggage_count_fields_values
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100046-13122019-63@example.com", "luggage_count": 2, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "passenger_count": 2, "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'luggage_count': 2, 'passenger_count': 2})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, luggage_count=2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=2, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=63
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100046-13122019-63@example.com', luggage_count=2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_count=2, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='10')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100046-13122019-63@example.com', luggage_count=2, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=2, credit_card_expiry_month='10')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100046-13122019-63@example.com", "luggage_count": 2, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "passenger_count": 2, "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_airport_iata_in_response" time="2.870"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100049-13122019-64@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;TXL&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;dropoff_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=64&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100049-13122019-64@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100049-13122019-64@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 151, in test_post_bookings_airport_iata_in_response
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100049-13122019-64@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "TXL", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=64
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100049-13122019-64@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100049-13122019-64@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100049-13122019-64@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "TXL", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_billing_data" time="4.057"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100052-13122019-65@example.com&quot;, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;billing_first_name&quot;: &quot;Sam&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;billing_city&quot;: &quot;Berlin&quot;, &quot;billing_country_code&quot;: &quot;DE&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;billing_company_name&quot;: &quot;Späti INC&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;billing_street_address&quot;: &quot;Feurigstrasse 100&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;billing_title&quot;: &quot;mr&quot;, &quot;billing_postal_code&quot;: &quot;10877&quot;, &quot;billing_last_name&quot;: &quot;Bennet&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'billing_country_code': 'DE', 'billing_company_name': 'Späti INC', 'billing_last_name': 'Bennet', 'billing_street_address': 'Feurigstrasse 100', 'billing_title': 'mr', 'billing_city': 'Berlin', 'billing_first_name': 'Sam', 'billing_postal_code': '10877'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, credit_card_holder='Radisch', billing_first_name='Sam', credit_card_number=4111111111111111, passenger_mobile='+491701234567', credit_card_expiry_year=2024, passenger_last_name='Dennis', billing_city='Berlin', depart_at='2019-12-14T12:12:52+00:00', billing_country_code='DE', payment_method_uuid=None, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, billing_street_address='Feurigstrasse 100', service_type='transfer', passenger_first_name='Dennis', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, billing_title='mr', billing_postal_code='10877', billing_last_name='Bennet', credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, billing_company_name='Späti INC', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=65&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100052-13122019-65@example.com', credit_card_holder='Radisch', billing_first_name='Sam', payment_method_uuid=None, passenger_mobile='+491701234567', depart_at='2019-12-14T12:12:52+00:00', passenger_last_name='Dennis', billing_city='Berlin', billing_country_code='DE', credit_card_number=4111111111111111, passenger_title='ms', billing_street_address='Feurigstrasse 100', service_type='transfer', credit_card_expiry_year=2024, passenger_first_name='Dennis', vehicle_type='business_class', billing_title='mr', billing_postal_code='10877', billing_last_name='Bennet', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', billing_company_name='Späti INC', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100052-13122019-65@example.com', credit_card_holder='Radisch', billing_first_name='Sam', credit_card_number=4111111111111111, passenger_mobile='+491701234567', depart_at='2019-12-14T12:12:52+00:00', passenger_last_name='Dennis', billing_city='Berlin', billing_country_code='DE', payment_method_uuid=None, passenger_title='ms', billing_street_address='Feurigstrasse 100', service_type='transfer', credit_card_expiry_year=2024, passenger_first_name='Dennis', vehicle_type='business_class', billing_title='mr', billing_postal_code='10877', billing_last_name='Bennet', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', billing_company_name='Späti INC', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 119, in test_post_bookings_billing_data
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100052-13122019-65@example.com", "credit_card_holder": "Radisch", "billing_first_name": "Sam", "passenger_mobile": "+491701234567", "vehicle_type": "business_class", "passenger_last_name": "Dennis", "billing_city": "Berlin", "billing_country_code": "DE", "credit_card_number": 4111111111111111, "billing_company_name": "Späti INC", "passenger_title": "ms", "billing_street_address": "Feurigstrasse 100", "service_type": "transfer", "passenger_first_name": "Dennis", "credit_card_expiry_year": 2024, "billing_title": "mr", "billing_postal_code": "10877", "billing_last_name": "Bennet", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_address": "Feurigstraße 59, 10827 Berlin, Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'billing_country_code': 'DE', 'billing_company_name': 'Späti INC', 'billing_last_name': 'Bennet', 'billing_street_address': 'Feurigstrasse 100', 'billing_title': 'mr', 'billing_city': 'Berlin', 'billing_first_name': 'Sam', 'billing_postal_code': '10877'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, credit_card_holder='Radisch', billing_first_name='Sam', credit_card_number=4111111111111111, passenger_mobile='+491701234567', credit_card_expiry_year=2024, passenger_last_name='Dennis', billing_city='Berlin', depart_at='2019-12-14T12:12:52+00:00', billing_country_code='DE', payment_method_uuid=None, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, billing_street_address='Feurigstrasse 100', service_type='transfer', passenger_first_name='Dennis', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, billing_title='mr', billing_postal_code='10877', billing_last_name='Bennet', credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, billing_company_name='Späti INC', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=65
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100052-13122019-65@example.com', credit_card_holder='Radisch', billing_first_name='Sam', payment_method_uuid=None, passenger_mobile='+491701234567', depart_at='2019-12-14T12:12:52+00:00', passenger_last_name='Dennis', billing_city='Berlin', billing_country_code='DE', credit_card_number=4111111111111111, passenger_title='ms', billing_street_address='Feurigstrasse 100', service_type='transfer', credit_card_expiry_year=2024, passenger_first_name='Dennis', vehicle_type='business_class', billing_title='mr', billing_postal_code='10877', billing_last_name='Bennet', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', billing_company_name='Späti INC', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100052-13122019-65@example.com', credit_card_holder='Radisch', billing_first_name='Sam', credit_card_number=4111111111111111, passenger_mobile='+491701234567', depart_at='2019-12-14T12:12:52+00:00', passenger_last_name='Dennis', billing_city='Berlin', billing_country_code='DE', payment_method_uuid=None, passenger_title='ms', billing_street_address='Feurigstrasse 100', service_type='transfer', credit_card_expiry_year=2024, passenger_first_name='Dennis', vehicle_type='business_class', billing_title='mr', billing_postal_code='10877', billing_last_name='Bennet', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', billing_company_name='Späti INC', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100052-13122019-65@example.com", "credit_card_holder": "Radisch", "billing_first_name": "Sam", "passenger_mobile": "+491701234567", "vehicle_type": "business_class", "passenger_last_name": "Dennis", "billing_city": "Berlin", "billing_country_code": "DE", "credit_card_number": 4111111111111111, "billing_company_name": "Späti INC", "passenger_title": "ms", "billing_street_address": "Feurigstrasse 100", "service_type": "transfer", "passenger_first_name": "Dennis", "credit_card_expiry_year": 2024, "billing_title": "mr", "billing_postal_code": "10877", "billing_last_name": "Bennet", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_address": "Feurigstraße 59, 10827 Berlin, Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_corporation_uuid_no_cc" time="0.718"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_credit_card_holder_not_mandatory" time="3.073"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100056-13122019-67@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;credit_card_expiry_month&quot;: &quot;12&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'credit_card_holder': None})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder=None, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=67&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100056-13122019-67@example.com', payment_method_uuid=None, credit_card_holder=None, passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='12')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100056-13122019-67@example.com', payment_method_uuid=None, credit_card_holder=None, passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='12')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 254, in test_post_bookings_credit_card_holder_not_mandatory
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100056-13122019-67@example.com", "credit_card_number": 4111111111111111, "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "vehicle_type": "business_class", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'credit_card_holder': None})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder=None, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=67
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100056-13122019-67@example.com', payment_method_uuid=None, credit_card_holder=None, passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='12')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100056-13122019-67@example.com', payment_method_uuid=None, credit_card_holder=None, passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='12')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100056-13122019-67@example.com", "credit_card_number": 4111111111111111, "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "vehicle_type": "business_class", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_fixed_markup_transfer" time="3.182"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100100-13122019-68@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstrasse 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Berliner Allee 55, 30175 Hannover, Niedersachse&quot;, &quot;credit_card_expiry_month&quot;: &quot;05&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'dropoff_address': 'Berliner Allee 55, 30175 Hannover, Niedersachse', 'pickup_address': 'Oranienstrasse 20, 10999 Berlin, Berlin'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=68&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100100-13122019-68@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month='05')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100100-13122019-68@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month='05')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 215, in test_post_bookings_fixed_markup_transfer
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100100-13122019-68@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstrasse 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Berliner Allee 55, 30175 Hannover, Niedersachse", "credit_card_expiry_month": "05"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'dropoff_address': 'Berliner Allee 55, 30175 Hannover, Niedersachse', 'pickup_address': 'Oranienstrasse 20, 10999 Berlin, Berlin'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=68
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100100-13122019-68@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month='05')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100100-13122019-68@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month='05')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100100-13122019-68@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstrasse 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Berliner Allee 55, 30175 Hannover, Niedersachse", "credit_card_expiry_month": "05"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_fixed_rebate_transfer" time="2.836"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100103-13122019-69@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstrasse 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Berliner Allee 55, 30175 Hannover, Niedersachse&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'dropoff_address': 'Berliner Allee 55, 30175 Hannover, Niedersachse', 'pickup_address': 'Oranienstrasse 20, 10999 Berlin, Berlin'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=69&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100103-13122019-69@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100103-13122019-69@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 200, in test_post_bookings_fixed_rebate_transfer
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100103-13122019-69@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstrasse 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Berliner Allee 55, 30175 Hannover, Niedersachse", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'dropoff_address': 'Berliner Allee 55, 30175 Hannover, Niedersachse', 'pickup_address': 'Oranienstrasse 20, 10999 Berlin, Berlin'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=69
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100103-13122019-69@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100103-13122019-69@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Oranienstrasse 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Berliner Allee 55, 30175 Hannover, Niedersachse', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100103-13122019-69@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstrasse 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Berliner Allee 55, 30175 Hannover, Niedersachse", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_hourly" time="2.887"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100106-13122019-70@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 21600, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;02&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=70&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100106-13122019-70@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=21600, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100106-13122019-70@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=21600, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 51, in test_post_bookings_guest_hourly
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100106-13122019-70@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 21600, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=70
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100106-13122019-70@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=21600, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100106-13122019-70@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=21600, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100106-13122019-70@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 21600, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_hourly_iata" time="2.983"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100108-13122019-71@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 7200, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyIata(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332f98&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=71&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100108-13122019-71@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=7200, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100108-13122019-71@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=7200, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 299, in test_post_bookings_guest_hourly_iata
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100108-13122019-71@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": 7200, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyIata(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332f98>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=71
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100108-13122019-71@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=7200, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100108-13122019-71@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=7200, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100108-13122019-71@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": 7200, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_hourly_prices_keys" time="2.870"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100111-13122019-72@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 28800, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;12&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=72&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100111-13122019-72@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=28800, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100111-13122019-72@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=28800, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 245, in test_post_bookings_guest_hourly_prices_keys
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100111-13122019-72@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 28800, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=72
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100111-13122019-72@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=28800, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100111-13122019-72@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=28800, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100111-13122019-72@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 28800, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_hourly_result" time="2.971"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100114-13122019-73@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 18000, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;04&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=73&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100114-13122019-73@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', duration=18000, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100114-13122019-73@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=18000, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 285, in test_post_bookings_guest_hourly_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100114-13122019-73@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "duration": 18000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=73
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100114-13122019-73@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', duration=18000, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100114-13122019-73@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=18000, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100114-13122019-73@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "duration": 18000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_passenger_title_unknown" time="2.830"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100117-13122019-74@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;unknown&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_title': 'unknown'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='unknown', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=74&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100117-13122019-74@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='unknown', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100117-13122019-74@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='unknown', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 352, in test_post_bookings_guest_passenger_title_unknown
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100117-13122019-74@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "unknown", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_title': 'unknown'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='unknown', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=74
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100117-13122019-74@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='unknown', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100117-13122019-74@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='unknown', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100117-13122019-74@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "unknown", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_transfer" time="2.908"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100120-13122019-75@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;01&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=75&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100120-13122019-75@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='01')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100120-13122019-75@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='01')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 45, in test_post_bookings_guest_transfer
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100120-13122019-75@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "01"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=75
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100120-13122019-75@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='01')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100120-13122019-75@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='01')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100120-13122019-75@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "01"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_transfer_address_iata" time="3.004"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100123-13122019-76@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;dropoff_airport_iata&quot;: &quot;TXL&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'dropoff_airport_iata': 'TXL', 'dropoff_address': None})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=76&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100123-13122019-76@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100123-13122019-76@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', dropoff_airport_iata='TXL', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 320, in test_post_bookings_guest_transfer_address_iata
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100123-13122019-76@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "dropoff_airport_iata": "TXL", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'dropoff_airport_iata': 'TXL', 'dropoff_address': None})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=76
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100123-13122019-76@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100123-13122019-76@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', dropoff_airport_iata='TXL', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100123-13122019-76@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "dropoff_airport_iata": "TXL", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_transfer_check_email" time="3.004"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100126-13122019-77@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;credit_card_expiry_month&quot;: &quot;12&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=77&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100126-13122019-77@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='12')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100126-13122019-77@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='12')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 326, in test_post_bookings_guest_transfer_check_email
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100126-13122019-77@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=77
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100126-13122019-77@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='12')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100126-13122019-77@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='12')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100126-13122019-77@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_transfer_check_mobile" time="2.801"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100129-13122019-78@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=78&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100129-13122019-78@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100129-13122019-78@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 334, in test_post_bookings_guest_transfer_check_mobile
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100129-13122019-78@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=78
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100129-13122019-78@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100129-13122019-78@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100129-13122019-78@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_transfer_check_passenger_names" time="3.034"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100132-13122019-79@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;08&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=79&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100132-13122019-79@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='08')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100132-13122019-79@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='08')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 367, in test_post_bookings_guest_transfer_check_passenger_names
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100132-13122019-79@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=79
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100132-13122019-79@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='08')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100132-13122019-79@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='08')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100132-13122019-79@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_transfer_check_title" time="3.000"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100135-13122019-80@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;07&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=80&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100135-13122019-80@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100135-13122019-80@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 359, in test_post_bookings_guest_transfer_check_title
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100135-13122019-80@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=80
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100135-13122019-80@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100135-13122019-80@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100135-13122019-80@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_transfer_iata" time="2.949"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100138-13122019-81@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;TXL&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;dropoff_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;02&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=81&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100138-13122019-81@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100138-13122019-81@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='02')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 293, in test_post_bookings_guest_transfer_iata
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100138-13122019-81@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "TXL", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=81
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100138-13122019-81@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100138-13122019-81@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='02')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100138-13122019-81@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "TXL", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_transfer_pickup_sign_entry" time="3.901"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;pickup_sign&quot;: &quot;Herr Sonne&quot;, &quot;passenger_email&quot;: &quot;QA-100141-13122019-82@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;08&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'pickup_sign': 'Herr Sonne'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, pickup_sign='Herr Sonne', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=82&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100141-13122019-82@example.com', pickup_sign='Herr Sonne', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='08')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100141-13122019-82@example.com', pickup_sign='Herr Sonne', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='08')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 260, in test_post_bookings_guest_transfer_pickup_sign_entry
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"pickup_sign": "Herr Sonne", "passenger_email": "QA-100141-13122019-82@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'pickup_sign': 'Herr Sonne'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, pickup_sign='Herr Sonne', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=82
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100141-13122019-82@example.com', pickup_sign='Herr Sonne', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='08')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100141-13122019-82@example.com', pickup_sign='Herr Sonne', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='08')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"pickup_sign": "Herr Sonne", "passenger_email": "QA-100141-13122019-82@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_transfer_prices_keys" time="3.170"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100145-13122019-83@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=83&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100145-13122019-83@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100145-13122019-83@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 92, in test_post_bookings_guest_transfer_prices_keys
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100145-13122019-83@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=83
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100145-13122019-83@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100145-13122019-83@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100145-13122019-83@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_guest_transfer_result" time="2.866"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100148-13122019-84@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;credit_card_expiry_month&quot;: &quot;07&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=84&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100148-13122019-84@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100148-13122019-84@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 57, in test_post_bookings_guest_transfer_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100148-13122019-84@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=84
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100148-13122019-84@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100148-13122019-84@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100148-13122019-84@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_hourly_vehicle_type_in_response_1_first_class" time="2.869"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100151-13122019-85@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 21600, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;12&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'vehicle_type': 'first_class'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=85&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100151-13122019-85@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', duration=21600, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100151-13122019-85@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=21600, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 377, in test_post_bookings_hourly_vehicle_type_in_response
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100151-13122019-85@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "duration": 21600, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'vehicle_type': 'first_class'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=85
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100151-13122019-85@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', duration=21600, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100151-13122019-85@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=21600, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100151-13122019-85@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "duration": 21600, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_hourly_vehicle_type_in_response_2_business_van" time="2.937"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100154-13122019-86@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 32400, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;12&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'vehicle_type': 'business_van'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=86&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100154-13122019-86@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=32400, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100154-13122019-86@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=32400, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 377, in test_post_bookings_hourly_vehicle_type_in_response
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100154-13122019-86@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 32400, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'vehicle_type': 'business_van'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=86
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100154-13122019-86@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=32400, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100154-13122019-86@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=32400, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='12')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100154-13122019-86@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 32400, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_hourly_vehicle_type_in_response_3_business_class" time="2.868"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100157-13122019-87@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 18000, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;02&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'vehicle_type': 'business_class'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=87&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100157-13122019-87@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', duration=18000, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100157-13122019-87@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=18000, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 377, in test_post_bookings_hourly_vehicle_type_in_response
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100157-13122019-87@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": 18000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'vehicle_type': 'business_class'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=87
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100157-13122019-87@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', duration=18000, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100157-13122019-87@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=18000, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100157-13122019-87@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": 18000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_non_ascii_names" time="3.050"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100159-13122019-88@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;CØÅÆL&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;ÄL∆NÍß&quot;, &quot;dropoff_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;12&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_last_name': 'ÄL∆NÍß', 'passenger_first_name': 'CØÅÆL'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='CØÅÆL', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='ÄL∆NÍß', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=88&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100159-13122019-88@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='CØÅÆL', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='ÄL∆NÍß', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='12')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100159-13122019-88@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='CØÅÆL', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='ÄL∆NÍß', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='12')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 306, in test_post_bookings_non_ascii_names
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100159-13122019-88@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "CØÅÆL", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "ÄL∆NÍß", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_last_name': 'ÄL∆NÍß', 'passenger_first_name': 'CØÅÆL'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='CØÅÆL', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='ÄL∆NÍß', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=88
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100159-13122019-88@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='CØÅÆL', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='ÄL∆NÍß', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='12')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100159-13122019-88@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='CØÅÆL', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='ÄL∆NÍß', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='12')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100159-13122019-88@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "CØÅÆL", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "ÄL∆NÍß", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_prices_items_base_price" time="3.095"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100203-13122019-89@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=89&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100203-13122019-89@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100203-13122019-89@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 101, in test_post_bookings_prices_items_base_price
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100203-13122019-89@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=89
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100203-13122019-89@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100203-13122019-89@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100203-13122019-89@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_prices_items_voucher" time="3.075"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100206-13122019-90@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;voucher_code&quot;: &quot;FREE&quot;, &quot;credit_card_expiry_month&quot;: &quot;07&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'voucher_code': 'FREE'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, voucher_code='FREE', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=90&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100206-13122019-90@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='FREE', credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100206-13122019-90@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='FREE', credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 131, in test_post_bookings_prices_items_voucher
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100206-13122019-90@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "voucher_code": "FREE", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'voucher_code': 'FREE'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, voucher_code='FREE', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=90
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100206-13122019-90@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='FREE', credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100206-13122019-90@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', voucher_code='FREE', credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100206-13122019-90@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "voucher_code": "FREE", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_send_sms_1_False" time="3.182"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100209-13122019-91@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;send_sms&quot;: False, &quot;dropoff_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;09&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'send_sms': False})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, send_sms=False)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=91&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100209-13122019-91@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', send_sms=False, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='09')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100209-13122019-91@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', credit_card_expiry_month='09', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', send_sms=False)&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 85, in test_post_bookings_send_sms
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100209-13122019-91@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "send_sms": False, "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'send_sms': False})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, send_sms=False)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=91
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100209-13122019-91@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', send_sms=False, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='09')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100209-13122019-91@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', credit_card_expiry_month='09', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', send_sms=False)
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100209-13122019-91@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "send_sms": False, "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_send_sms_2_True" time="3.070"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100212-13122019-92@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;send_sms&quot;: true, &quot;dropoff_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'send_sms': True})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, send_sms=True)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=92&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100212-13122019-92@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', send_sms=True, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100212-13122019-92@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', credit_card_expiry_month='06', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', send_sms=True)&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 85, in test_post_bookings_send_sms
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100212-13122019-92@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "send_sms": true, "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'send_sms': True})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, send_sms=True)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=92
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100212-13122019-92@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', send_sms=True, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100212-13122019-92@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', credit_card_expiry_month='06', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', send_sms=True)
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100212-13122019-92@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "send_sms": true, "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_transfer_pickup_sign_airline_flight_provided" time="2.852"><error type="builtins.KeyError" message="'result'&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100215-13122019-93@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;flight_number&quot;: &quot;1234&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;airline_code&quot;: &quot;XY&quot;, &quot;dropoff_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;07&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'airline_code': 'XY', 'flight_number': '1234'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=93&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100215-13122019-93@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100215-13122019-93@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 277, in test_post_bookings_transfer_pickup_sign_airline_flight_provided
    assert_that(self.api.response[RESULT], has_entries({
'result'
-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100215-13122019-93@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "flight_number": "1234", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "airline_code": "XY", "dropoff_address": "Feurigstraße 59, 10827 Berlin, Berlin", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'airline_code': 'XY', 'flight_number': '1234'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=93
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100215-13122019-93@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100215-13122019-93@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></error><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100215-13122019-93@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "flight_number": "1234", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "airline_code": "XY", "dropoff_address": "Feurigstraße 59, 10827 Berlin, Berlin", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_transfer_pickup_sign_airport_iata_provided" time="3.088"><error type="builtins.KeyError" message="'result'&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100218-13122019-94@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 36000, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyIata(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332f98&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=94&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100218-13122019-94@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=36000, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100218-13122019-94@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=36000, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 268, in test_post_bookings_transfer_pickup_sign_airport_iata_provided
    assert_that(self.api.response[RESULT], has_entries({
'result'
-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100218-13122019-94@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 36000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyIata(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332f98>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=94
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100218-13122019-94@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=36000, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100218-13122019-94@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=36000, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></error><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100218-13122019-94@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 36000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_with_corporation_uuid_with_cc" time="3.076"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100221-13122019-95@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;corporation_uuid&quot;: &quot;a0b9d1b6-5207-4daf-bccc-648e1de33129&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'corporation_uuid': 'a0b9d1b6-5207-4daf-bccc-648e1de33129'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=95&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100221-13122019-95@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100221-13122019-95@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 169, in test_post_bookings_with_corporation_uuid_with_cc
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100221-13122019-95@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "corporation_uuid": "a0b9d1b6-5207-4daf-bccc-648e1de33129", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'corporation_uuid': 'a0b9d1b6-5207-4daf-bccc-648e1de33129'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=95
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100221-13122019-95@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100221-13122019-95@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', corporation_uuid='a0b9d1b6-5207-4daf-bccc-648e1de33129', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100221-13122019-95@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "corporation_uuid": "a0b9d1b6-5207-4daf-bccc-648e1de33129", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_bookings_with_voucher" time="2.828"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100224-13122019-96@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 18000, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;voucher_code&quot;: &quot;FREE&quot;, &quot;credit_card_expiry_month&quot;: &quot;08&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'voucher_code': 'FREE'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', voucher_code='FREE', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=96&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100224-13122019-96@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=18000, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', voucher_code='FREE', credit_card_expiry_month='08')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100224-13122019-96@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=18000, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', voucher_code='FREE', credit_card_expiry_month='08')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 160, in test_post_bookings_with_voucher
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100224-13122019-96@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 18000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "voucher_code": "FREE", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'voucher_code': 'FREE'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', voucher_code='FREE', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=96
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100224-13122019-96@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=18000, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', voucher_code='FREE', credit_card_expiry_month='08')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100224-13122019-96@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=18000, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', voucher_code='FREE', credit_card_expiry_month='08')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100224-13122019-96@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 18000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "voucher_code": "FREE", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_user_bookings_has_keys" time="2.978"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100227-13122019-97@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;pickup_place_id&quot;: &quot;ChIJ62hndh9OqEcRydXjBjh91ps&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_place_id&quot;: &quot;ChIJ3RFqmopOqEcRl6HHWGTXfKQ&quot;, &quot;credit_card_expiry_month&quot;: &quot;10&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferPlaceID(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferPlaceID'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', pickup_place_id=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332da0&gt;&gt;, passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332b00&gt;&gt;, dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=97&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100227-13122019-97@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', dropoff_address=None, credit_card_expiry_month='10')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100227-13122019-97@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', dropoff_address=None, credit_card_expiry_month='10')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 77, in test_post_user_bookings_has_keys
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100227-13122019-97@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "pickup_place_id": "ChIJ62hndh9OqEcRydXjBjh91ps", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "dropoff_place_id": "ChIJ3RFqmopOqEcRl6HHWGTXfKQ", "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferPlaceID(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferPlaceID'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', pickup_place_id=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332da0>>, passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332b00>>, dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=97
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100227-13122019-97@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', dropoff_address=None, credit_card_expiry_month='10')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100227-13122019-97@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', dropoff_address=None, credit_card_expiry_month='10')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100227-13122019-97@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "pickup_place_id": "ChIJ62hndh9OqEcRydXjBjh91ps", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "dropoff_place_id": "ChIJ3RFqmopOqEcRl6HHWGTXfKQ", "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_user_bookings_hourly_place_id" time="2.970"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100230-13122019-98@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;pickup_place_id&quot;: &quot;ChIJ62hndh9OqEcRydXjBjh91ps&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 10800, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;07&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyPlaceID(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyPlaceID'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyPlaceID(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', pickup_place_id=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327f0&gt;&gt;, passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=98&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyPlaceID(passenger_email='QA-100230-13122019-98@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=10800, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyPlaceID(passenger_email='QA-100230-13122019-98@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=10800, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 71, in test_post_user_bookings_hourly_place_id
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100230-13122019-98@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "pickup_place_id": "ChIJ62hndh9OqEcRydXjBjh91ps", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "duration": 10800, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyPlaceID(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyPlaceID'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyPlaceID(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', pickup_place_id=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327f0>>, passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=98
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyPlaceID(passenger_email='QA-100230-13122019-98@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=10800, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyPlaceID(passenger_email='QA-100230-13122019-98@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=10800, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100230-13122019-98@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "pickup_place_id": "ChIJ62hndh9OqEcRydXjBjh91ps", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "duration": 10800, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_post_user_bookings_transfer_place_id" time="3.992"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100233-13122019-99@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;pickup_place_id&quot;: &quot;ChIJ3RFqmopOqEcRl6HHWGTXfKQ&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_place_id&quot;: &quot;ChIJ62hndh9OqEcRydXjBjh91ps&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferPlaceID(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferPlaceID'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', pickup_place_id=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332da0&gt;&gt;, passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332b00&gt;&gt;, dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=99&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100233-13122019-99@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', pickup_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', dropoff_address=None, credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100233-13122019-99@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', pickup_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', dropoff_address=None, credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 65, in test_post_user_bookings_transfer_place_id
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100233-13122019-99@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "pickup_place_id": "ChIJ3RFqmopOqEcRl6HHWGTXfKQ", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "dropoff_place_id": "ChIJ62hndh9OqEcRydXjBjh91ps", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferPlaceID(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferPlaceID'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', pickup_place_id=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332da0>>, passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332b00>>, dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=99
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100233-13122019-99@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', pickup_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', dropoff_address=None, credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100233-13122019-99@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', pickup_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', dropoff_address=None, credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100233-13122019-99@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "pickup_place_id": "ChIJ3RFqmopOqEcRl6HHWGTXfKQ", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "dropoff_place_id": "ChIJ62hndh9OqEcRydXjBjh91ps", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_various_phone_number_formats_1__49_17_012_345_67" time="2.971"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100237-13122019-100@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+49-17-012-345-67&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;credit_card_expiry_month&quot;: &quot;09&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_mobile': '+49-17-012-345-67'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+49-17-012-345-67', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=100&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100237-13122019-100@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+49-17-012-345-67', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100237-13122019-100@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+49-17-012-345-67', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 344, in test_various_phone_number_formats
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100237-13122019-100@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+49-17-012-345-67", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_mobile': '+49-17-012-345-67'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+49-17-012-345-67', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=100
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100237-13122019-100@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+49-17-012-345-67', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100237-13122019-100@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+49-17-012-345-67', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100237-13122019-100@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+49-17-012-345-67", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_various_phone_number_formats_2_00491701234567" time="2.993"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100240-13122019-101@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;00491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;credit_card_expiry_month&quot;: &quot;10&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_mobile': '00491701234567'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='00491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=101&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100240-13122019-101@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='00491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='10')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100240-13122019-101@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='00491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='10')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 344, in test_various_phone_number_formats
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100240-13122019-101@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "00491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_mobile': '00491701234567'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='00491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=101
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100240-13122019-101@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='00491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='10')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100240-13122019-101@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='00491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='10')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100240-13122019-101@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "00491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_various_phone_number_formats_3__49_17_01234567" time="2.800"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100243-13122019-102@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+49(17)01234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;04&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_mobile': '+49(17)01234567'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+49(17)01234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=102&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100243-13122019-102@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+49(17)01234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100243-13122019-102@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+49(17)01234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 344, in test_various_phone_number_formats
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100243-13122019-102@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+49(17)01234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_mobile': '+49(17)01234567'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+49(17)01234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=102
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100243-13122019-102@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+49(17)01234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100243-13122019-102@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+49(17)01234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100243-13122019-102@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+49(17)01234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_various_phone_number_formats_4_0049__17_01234567" time="2.837"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100246-13122019-103@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;0049 (17)01234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_mobile': '0049 (17)01234567'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='0049 (17)01234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=103&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100246-13122019-103@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='0049 (17)01234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100246-13122019-103@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='0049 (17)01234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 344, in test_various_phone_number_formats
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100246-13122019-103@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "0049 (17)01234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_mobile': '0049 (17)01234567'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='0049 (17)01234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=103
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100246-13122019-103@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='0049 (17)01234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100246-13122019-103@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='0049 (17)01234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100246-13122019-103@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "0049 (17)01234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings.TestBlacklaneUntrustedPOSTBookings" name="test_various_phone_number_formats_5_0049__17__012_345_67" time="2.944"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;201&gt;&#10;     but: was &lt;500&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100248-13122019-104@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;0049-(17)-012-345-67&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;credit_card_expiry_month&quot;: &quot;09&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_mobile': '0049-(17)-012-345-67'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='0049-(17)-012-345-67', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=104&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100248-13122019-104@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='0049-(17)-012-345-67', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100248-13122019-104@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='0049-(17)-012-345-67', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_blacklane/test_blacklane_bookings.py", line 344, in test_various_phone_number_formats
    assert_that(self.api.code, equal_to(201))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <201>
     but: was <500>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100248-13122019-104@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "0049-(17)-012-345-67", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'passenger_mobile': '0049-(17)-012-345-67'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='0049-(17)-012-345-67', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=104
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100248-13122019-104@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='0049-(17)-012-345-67', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100248-13122019-104@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='0049-(17)-012-345-67', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='09')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100248-13122019-104@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "0049-(17)-012-345-67", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_booking_identifier_conflict_case_1" time="0.758"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_booking_identifier_conflict_case_2" time="0.672"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_booking_identifier_conflict_case_3" time="0.752"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_booking_identifier_conflict_case_4" time="0.714"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_cancel_booking_by_booking_number" time="5.395"><failure type="builtins.AssertionError" message="Could not delete the booking by booking_number=573177100&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  573177100&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/573177100&#10;&#10;REQUEST ID 853b552e-5f07-41ad-9734-f1ae16cc0b8e&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'kg1iw100254-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='transfer', external_id='kg1iw100254-13122019', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', service_type='transfer', external_id='kg1iw100254-13122019', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', vehicle_type='business_van')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_van', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', service_type='transfer', external_id='kg1iw100254-13122019', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 2729&#10;root: INFO: The booking was placed, booking number: 573177100&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/573177100 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/573177100 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/573177100 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/573177100 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/573177100 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 105, in test_cancel_booking_by_booking_number
    self.place_booking_and_assert_cancellation(service_type='transfer')
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by booking_number=573177100
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  573177100

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/573177100

REQUEST ID 853b552e-5f07-41ad-9734-f1ae16cc0b8e

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'kg1iw100254-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='transfer', external_id='kg1iw100254-13122019', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', service_type='transfer', external_id='kg1iw100254-13122019', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', vehicle_type='business_van')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_van', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', service_type='transfer', external_id='kg1iw100254-13122019', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 2729
root: INFO: The booking was placed, booking number: 573177100
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/573177100 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/573177100 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/573177100 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/573177100 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/573177100 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  573177100

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/573177100

REQUEST ID 853b552e-5f07-41ad-9734-f1ae16cc0b8e
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_cancel_booking_by_external_id_1_transfer" time="5.439"><failure type="builtins.AssertionError" message="Could not delete the booking by external_id=99m81100300-13122019&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  109997972&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/99m81100300-13122019&#10;&#10;REQUEST ID 3a1ee348-8fd8-4c96-808f-d34b656a722d&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': '99m81100300-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='transfer', external_id='99m81100300-13122019', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='99m81100300-13122019', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', vehicle_type='business_van')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_van', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='99m81100300-13122019', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 3849&#10;root: INFO: The booking was placed, booking number: 109997972&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/99m81100300-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/99m81100300-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/99m81100300-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/99m81100300-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/99m81100300-13122019 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 101, in test_cancel_booking_by_external_id
    booking_identifier=EXTERNAL_ID)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by external_id=99m81100300-13122019
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  109997972

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/99m81100300-13122019

REQUEST ID 3a1ee348-8fd8-4c96-808f-d34b656a722d

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': '99m81100300-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='transfer', external_id='99m81100300-13122019', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='99m81100300-13122019', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', vehicle_type='business_van')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_van', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='99m81100300-13122019', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 3849
root: INFO: The booking was placed, booking number: 109997972
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/99m81100300-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/99m81100300-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/99m81100300-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/99m81100300-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/99m81100300-13122019 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  109997972

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/99m81100300-13122019

REQUEST ID 3a1ee348-8fd8-4c96-808f-d34b656a722d
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_cancel_booking_by_external_id_2_hourly" time="5.238"><failure type="builtins.AssertionError" message="Could not delete the booking by external_id=x6v7s100305-13122019&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  784055272&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/x6v7s100305-13122019&#10;&#10;REQUEST ID 202335cf-2363-4909-ba87-a88a39f5ae3f&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsHourlyFactory(extra={'external_id': 'x6v7s100305-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='hourly', external_id='x6v7s100305-13122019', depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=28800, depart_at='2019-12-14T12:12:52+00:00', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', service_type='hourly', external_id='x6v7s100305-13122019', vehicle_type='first_class')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=28800, vehicle_type='first_class', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', service_type='hourly', external_id='x6v7s100305-13122019', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 2206&#10;root: INFO: The booking was placed, booking number: 784055272&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/x6v7s100305-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/x6v7s100305-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/x6v7s100305-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/x6v7s100305-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/x6v7s100305-13122019 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 101, in test_cancel_booking_by_external_id
    booking_identifier=EXTERNAL_ID)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by external_id=x6v7s100305-13122019
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  784055272

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/x6v7s100305-13122019

REQUEST ID 202335cf-2363-4909-ba87-a88a39f5ae3f

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsHourlyFactory(extra={'external_id': 'x6v7s100305-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='hourly', external_id='x6v7s100305-13122019', depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=28800, depart_at='2019-12-14T12:12:52+00:00', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', service_type='hourly', external_id='x6v7s100305-13122019', vehicle_type='first_class')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=28800, vehicle_type='first_class', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', service_type='hourly', external_id='x6v7s100305-13122019', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 2206
root: INFO: The booking was placed, booking number: 784055272
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/x6v7s100305-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/x6v7s100305-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/x6v7s100305-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/x6v7s100305-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/x6v7s100305-13122019 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  784055272

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/x6v7s100305-13122019

REQUEST ID 202335cf-2363-4909-ba87-a88a39f5ae3f
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_cancel_booking_by_uuid_1_transfer" time="5.389"><failure type="builtins.AssertionError" message="Could not delete the booking by uuid=fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  656583878&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39&#10;&#10;REQUEST ID 8f7215fe-6201-4535-b93b-61730cb1246d&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': '7d8if100310-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='transfer', external_id='7d8if100310-13122019', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='7d8if100310-13122019', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', vehicle_type='first_class')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='first_class', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='7d8if100310-13122019', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 3148&#10;root: INFO: The booking was placed, booking number: 656583878&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 95, in test_cancel_booking_by_uuid
    self.place_booking_and_assert_cancellation(service_type=value, booking_identifier=UUID)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by uuid=fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  656583878

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39

REQUEST ID 8f7215fe-6201-4535-b93b-61730cb1246d

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': '7d8if100310-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='transfer', external_id='7d8if100310-13122019', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='7d8if100310-13122019', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', vehicle_type='first_class')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='first_class', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='7d8if100310-13122019', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 3148
root: INFO: The booking was placed, booking number: 656583878
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  656583878

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/fa49ba8f-2a13-4eaf-bc33-3a4671bb0a39

REQUEST ID 8f7215fe-6201-4535-b93b-61730cb1246d
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_cancel_booking_by_uuid_2_hourly" time="6.640"><failure type="builtins.AssertionError" message="Could not delete the booking by uuid=55d68b50-9bd6-4699-920d-397819ac5504&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  350270832&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504&#10;&#10;REQUEST ID ba6fa624-f977-4654-ab4b-f1665c1397e3&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsHourlyFactory(extra={'external_id': 't9hdb100316-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='hourly', external_id='t9hdb100316-13122019', depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=10800, depart_at='2019-12-14T12:12:52+00:00', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', service_type='hourly', external_id='t9hdb100316-13122019', vehicle_type='business_class')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=10800, vehicle_type='business_class', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', service_type='hourly', external_id='t9hdb100316-13122019', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 2188&#10;root: INFO: The booking was placed, booking number: 350270832&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 95, in test_cancel_booking_by_uuid
    self.place_booking_and_assert_cancellation(service_type=value, booking_identifier=UUID)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by uuid=55d68b50-9bd6-4699-920d-397819ac5504
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  350270832

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504

REQUEST ID ba6fa624-f977-4654-ab4b-f1665c1397e3

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsHourlyFactory(extra={'external_id': 't9hdb100316-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='hourly', external_id='t9hdb100316-13122019', depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=10800, depart_at='2019-12-14T12:12:52+00:00', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', service_type='hourly', external_id='t9hdb100316-13122019', vehicle_type='business_class')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsHourlyFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', duration=10800, vehicle_type='business_class', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', service_type='hourly', external_id='t9hdb100316-13122019', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 2188
root: INFO: The booking was placed, booking number: 350270832
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  350270832

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/55d68b50-9bd6-4699-920d-397819ac5504

REQUEST ID ba6fa624-f977-4654-ab4b-f1665c1397e3
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_cancelled_booking_external_id_in_response" time="5.658"><failure type="builtins.AssertionError" message="Could not delete the booking by external_id=2z1hj100322-13122019&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  363730416&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/2z1hj100322-13122019&#10;&#10;REQUEST ID 37421bd3-9cf3-40db-b882-00beefa85f16&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': '2z1hj100322-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='transfer', external_id='2z1hj100322-13122019', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='2z1hj100322-13122019', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', vehicle_type='first_class')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='first_class', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='2z1hj100322-13122019', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 2877&#10;root: INFO: The booking was placed, booking number: 363730416&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/2z1hj100322-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/2z1hj100322-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/2z1hj100322-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/2z1hj100322-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/2z1hj100322-13122019 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 115, in test_cancelled_booking_external_id_in_response
    self.place_booking_and_assert_cancellation('transfer', EXTERNAL_ID)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by external_id=2z1hj100322-13122019
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  363730416

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/2z1hj100322-13122019

REQUEST ID 37421bd3-9cf3-40db-b882-00beefa85f16

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': '2z1hj100322-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='transfer', external_id='2z1hj100322-13122019', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='2z1hj100322-13122019', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', vehicle_type='first_class')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='first_class', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='2z1hj100322-13122019', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 2877
root: INFO: The booking was placed, booking number: 363730416
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/2z1hj100322-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/2z1hj100322-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/2z1hj100322-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/2z1hj100322-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/2z1hj100322-13122019 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  363730416

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/2z1hj100322-13122019

REQUEST ID 37421bd3-9cf3-40db-b882-00beefa85f16
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_cancelled_booking_number_in_response" time="5.505"><failure type="builtins.AssertionError" message="Could not delete the booking by booking_number=424142445&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  424142445&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/424142445&#10;&#10;REQUEST ID aeaf40d9-09eb-45d5-b4a2-4593296c000a&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'v7j2e100328-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='transfer', external_id='v7j2e100328-13122019', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='v7j2e100328-13122019', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', vehicle_type='business_class')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_class', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='v7j2e100328-13122019', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 3271&#10;root: INFO: The booking was placed, booking number: 424142445&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/424142445 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/424142445 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/424142445 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/424142445 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/424142445 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 109, in test_cancelled_booking_number_in_response
    self.place_booking_and_assert_cancellation('transfer')
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by booking_number=424142445
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  424142445

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/424142445

REQUEST ID aeaf40d9-09eb-45d5-b4a2-4593296c000a

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'v7j2e100328-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='transfer', external_id='v7j2e100328-13122019', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='v7j2e100328-13122019', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', vehicle_type='business_class')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_class', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', service_type='transfer', external_id='v7j2e100328-13122019', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 3271
root: INFO: The booking was placed, booking number: 424142445
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/424142445 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/424142445 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/424142445 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/424142445 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/424142445 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  424142445

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/424142445

REQUEST ID aeaf40d9-09eb-45d5-b4a2-4593296c000a
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_cancelled_booking_uuid_in_response" time="5.284"><failure type="builtins.AssertionError" message="Could not delete the booking by uuid=db30f87e-ee35-4b96-bf55-0e1757f5d9a6&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  253554768&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6&#10;&#10;REQUEST ID 378b73ef-26d0-413f-bd28-d8026b0bf1df&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'wkpo2100333-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='transfer', external_id='wkpo2100333-13122019', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='wkpo2100333-13122019', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', vehicle_type='business_class')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_class', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='wkpo2100333-13122019', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 3761&#10;root: INFO: The booking was placed, booking number: 253554768&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 121, in test_cancelled_booking_uuid_in_response
    self.place_booking_and_assert_cancellation('transfer', UUID)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by uuid=db30f87e-ee35-4b96-bf55-0e1757f5d9a6
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  253554768

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6

REQUEST ID 378b73ef-26d0-413f-bd28-d8026b0bf1df

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'wkpo2100333-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='transfer', external_id='wkpo2100333-13122019', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='wkpo2100333-13122019', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', vehicle_type='business_class')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_class', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='wkpo2100333-13122019', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 3761
root: INFO: The booking was placed, booking number: 253554768
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  253554768

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/db30f87e-ee35-4b96-bf55-0e1757f5d9a6

REQUEST ID 378b73ef-26d0-413f-bd28-d8026b0bf1df
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_error_booking_not_found" time="0.123"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_error_cancellation_not_allowed_1_uuid" time="5.301"><failure type="builtins.AssertionError" message="Could not delete the booking by uuid=57cd7905-9113-4afc-a3da-cd719b32d592&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  564364064&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592&#10;&#10;REQUEST ID 7c0e5833-4550-4cd2-9a5b-dadf691c2e8d&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'e1jbf100339-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='transfer', external_id='e1jbf100339-13122019', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='e1jbf100339-13122019', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', vehicle_type='business_class')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_class', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='e1jbf100339-13122019', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 3509&#10;root: INFO: The booking was placed, booking number: 564364064&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 235, in test_error_cancellation_not_allowed
    booking_identifier=value)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by uuid=57cd7905-9113-4afc-a3da-cd719b32d592
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  564364064

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592

REQUEST ID 7c0e5833-4550-4cd2-9a5b-dadf691c2e8d

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'e1jbf100339-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='transfer', external_id='e1jbf100339-13122019', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='e1jbf100339-13122019', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', vehicle_type='business_class')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_class', pickup_address='Flughafen 1, 12529 Berlin', service_type='transfer', external_id='e1jbf100339-13122019', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 3509
root: INFO: The booking was placed, booking number: 564364064
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  564364064

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/57cd7905-9113-4afc-a3da-cd719b32d592

REQUEST ID 7c0e5833-4550-4cd2-9a5b-dadf691c2e8d
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_error_cancellation_not_allowed_2_external_id" time="5.319"><failure type="builtins.AssertionError" message="Could not delete the booking by external_id=x42pd100344-13122019&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  487296132&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/x42pd100344-13122019&#10;&#10;REQUEST ID c16654ee-926d-4614-8a15-d00dc2800a0e&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'x42pd100344-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='transfer', external_id='x42pd100344-13122019', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', service_type='transfer', external_id='x42pd100344-13122019', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', vehicle_type='business_van')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_van', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', service_type='transfer', external_id='x42pd100344-13122019', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 2785&#10;root: INFO: The booking was placed, booking number: 487296132&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/x42pd100344-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/x42pd100344-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/x42pd100344-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/x42pd100344-13122019 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/x42pd100344-13122019 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 235, in test_error_cancellation_not_allowed
    booking_identifier=value)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by external_id=x42pd100344-13122019
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  487296132

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/x42pd100344-13122019

REQUEST ID c16654ee-926d-4614-8a15-d00dc2800a0e

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'x42pd100344-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='transfer', external_id='x42pd100344-13122019', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', service_type='transfer', external_id='x42pd100344-13122019', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', vehicle_type='business_van')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_van', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', service_type='transfer', external_id='x42pd100344-13122019', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 2785
root: INFO: The booking was placed, booking number: 487296132
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/x42pd100344-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/x42pd100344-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/x42pd100344-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/x42pd100344-13122019 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/x42pd100344-13122019 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  487296132

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/x42pd100344-13122019

REQUEST ID c16654ee-926d-4614-8a15-d00dc2800a0e
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_error_cancellation_not_allowed_3_booking_number" time="5.297"><failure type="builtins.AssertionError" message="Could not delete the booking by booking_number=924926876&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;BOOKING NUMBER:  924926876&#10;&#10;RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}&#10;&#10;URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/924926876&#10;&#10;REQUEST ID 2fbc426c-7ff1-4d48-b54e-4f1c7d17db83&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'ic8lm100350-13122019'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, service_type='transfer', external_id='ic8lm100350-13122019', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, depart_at='2019-12-14T12:12:52+00:00')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', service_type='transfer', external_id='ic8lm100350-13122019', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', vehicle_type='business_van')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_van', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', service_type='transfer', external_id='ic8lm100350-13122019', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /bookings HTTP/1.1&quot; 201 3483&#10;root: INFO: The booking was placed, booking number: 924926876&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/924926876 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/924926876 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/924926876 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/924926876 HTTP/1.1&quot; 422 142&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;DELETE /rest/v1.0/bookings/924926876 HTTP/1.1&quot; 422 142&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/utils/ddt.py", line 141, in wrapper
    return func(self, *args, **kwargs)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 235, in test_error_cancellation_not_allowed
    booking_identifier=value)
  File "/app/tests/test_athena/test_athena_bookings_cancellation.py", line 89, in place_booking_and_assert_cancellation
    .format(booking_identifier, identifier))
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 49, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 212, in call
    raise attempt.get()
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 247, in get
    six.reraise(self.value[0], self.value[1], self.value[2])
  File "/usr/local/lib/python3.5/site-packages/six.py", line 686, in reraise
    raise value
  File "/usr/local/lib/python3.5/site-packages/retrying.py", line 200, in call
    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)
  File "/app/utils/helpers.py", line 151, in assert_200
    assert_that(f(), equal_to(200), err)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)
Could not delete the booking by booking_number=924926876
Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------

BOOKING NUMBER:  924926876

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/924926876

REQUEST ID 2fbc426c-7ff1-4d48-b54e-4f1c7d17db83

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.UserBookingsTransferFactory(extra={'external_id': 'ic8lm100350-13122019'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, service_type='transfer', external_id='ic8lm100350-13122019', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, depart_at='2019-12-14T12:12:52+00:00')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', depart_at='2019-12-14T12:12:52+00:00', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', service_type='transfer', external_id='ic8lm100350-13122019', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', vehicle_type='business_van')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.UserBookingsTransferFactory(payment_method_uuid='749dfa30-7b1f-443f-abf8-46afe75ab783', vehicle_type='business_van', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', service_type='transfer', external_id='ic8lm100350-13122019', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', depart_at='2019-12-14T12:12:52+00:00')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): athena-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /bookings HTTP/1.1" 201 3483
root: INFO: The booking was placed, booking number: 924926876
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/924926876 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/924926876 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/924926876 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/924926876 HTTP/1.1" 422 142
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "DELETE /rest/v1.0/bookings/924926876 HTTP/1.1" 422 142
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[
BOOKING NUMBER:  924926876

RESPONSE {'errors': [{'message': 'booking_not_found', 'description': 'The booking identified by the given uuid, external_id or booking_number could not be found.'}]}

URL https://proteus-auto.blacklane.io/rest/v1.0/bookings/924926876

REQUEST ID 2fbc426c-7ff1-4d48-b54e-4f1c7d17db83
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_cancellation.TestBlacklaneBookingCancellation" name="test_error_unauthorized" time="0.147"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_check_meeting_instructions" time="3.030"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100355-13122019-120@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 36000, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;01&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=120&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100355-13122019-120@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=36000, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='01')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100355-13122019-120@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=36000, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='01')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 145, in test_booking_update_check_meeting_instructions
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100355-13122019-120@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 36000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "01"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=120
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100355-13122019-120@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=36000, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='01')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100355-13122019-120@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=36000, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='01')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100355-13122019-120@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 36000, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "01"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_check_place_id" time="3.013"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100358-13122019-121@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;pickup_place_id&quot;: &quot;ChIJ62hndh9OqEcRydXjBjh91ps&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_place_id&quot;: &quot;ChIJ3RFqmopOqEcRl6HHWGTXfKQ&quot;, &quot;credit_card_expiry_month&quot;: &quot;02&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferPlaceID(extra={'vehicle_type': 'business_class'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferPlaceID'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', pickup_place_id=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332da0&gt;&gt;, passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332b00&gt;&gt;, dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=121&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100358-13122019-121@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', dropoff_address=None, credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100358-13122019-121@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', dropoff_address=None, credit_card_expiry_month='02')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 134, in test_booking_update_check_place_id
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100358-13122019-121@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "pickup_place_id": "ChIJ62hndh9OqEcRydXjBjh91ps", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "dropoff_place_id": "ChIJ3RFqmopOqEcRl6HHWGTXfKQ", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferPlaceID(extra={'vehicle_type': 'business_class'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferPlaceID'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', pickup_place_id=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332da0>>, passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332b00>>, dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=121
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100358-13122019-121@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', dropoff_address=None, credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferPlaceID(passenger_email='QA-100358-13122019-121@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', pickup_place_id='ChIJ62hndh9OqEcRydXjBjh91ps', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_place_id='ChIJ3RFqmopOqEcRl6HHWGTXfKQ', dropoff_address=None, credit_card_expiry_month='02')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100358-13122019-121@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "pickup_place_id": "ChIJ62hndh9OqEcRydXjBjh91ps", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "dropoff_place_id": "ChIJ3RFqmopOqEcRl6HHWGTXfKQ", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_depart_at" time="2.939"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100401-13122019-122@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 28800, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;08&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyIata(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332f98&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=122&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100401-13122019-122@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=28800, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='08')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100401-13122019-122@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=28800, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='08')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 111, in test_booking_update_depart_at
    booking_response = self.get_booking_response_result(hourly_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100401-13122019-122@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "duration": 28800, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyIata(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332f98>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=122
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100401-13122019-122@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=28800, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='08')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyIata(passenger_email='QA-100401-13122019-122@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=28800, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='08')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100401-13122019-122@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "duration": 28800, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_flight_data_does_not_cancel_booking" time="3.110"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100404-13122019-123@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;flight_number&quot;: &quot;1234&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;airline_code&quot;: &quot;XY&quot;, &quot;dropoff_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;04&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'airline_code': 'XY', 'flight_number': '1234'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=123&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100404-13122019-123@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100404-13122019-123@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 289, in test_booking_update_flight_data_does_not_cancel_booking
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100404-13122019-123@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "flight_number": "1234", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "airline_code": "XY", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'airline_code': 'XY', 'flight_number': '1234'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=123
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100404-13122019-123@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100404-13122019-123@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', flight_number='1234', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', airline_code='XY', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100404-13122019-123@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "flight_number": "1234", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "airline_code": "XY", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_from_address_to_airport_iata" time="2.969"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100407-13122019-124@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;05&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=124&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100407-13122019-124@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='05')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100407-13122019-124@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='05')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 215, in test_booking_update_from_address_to_airport_iata
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100407-13122019-124@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "05"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=124
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100407-13122019-124@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='05')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100407-13122019-124@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='05')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100407-13122019-124@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "05"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_from_transfer_to_hourly" time="2.817"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100410-13122019-125@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=125&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100410-13122019-125@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100410-13122019-125@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 167, in test_booking_update_from_transfer_to_hourly
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100410-13122019-125@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=125
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100410-13122019-125@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100410-13122019-125@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100410-13122019-125@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_passenger_count_and_luggage_count_fields_values" time="4.151"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100413-13122019-126@example.com&quot;, &quot;luggage_count&quot;: 1, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;TXL&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_airport_iata&quot;: &quot;TXL&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;passenger_count&quot;: 1, &quot;credit_card_expiry_month&quot;: &quot;08&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'luggage_count': 1, 'passenger_count': 1})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=126&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100413-13122019-126@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=1, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='08')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100413-13122019-126@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month='08')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 302, in test_booking_update_passenger_count_and_luggage_count_fields_values
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100413-13122019-126@example.com", "luggage_count": 1, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "TXL", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "TXL", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "passenger_count": 1, "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'luggage_count': 1, 'passenger_count': 1})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=126
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100413-13122019-126@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=1, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='08')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100413-13122019-126@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month='08')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100413-13122019-126@example.com", "luggage_count": 1, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "TXL", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "TXL", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "passenger_count": 1, "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_passenger_data" time="2.881"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100417-13122019-127@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=127&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100417-13122019-127@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100417-13122019-127@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 101, in test_booking_update_passenger_data
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100417-13122019-127@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=127
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100417-13122019-127@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100417-13122019-127@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100417-13122019-127@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_transfer_pickup_address" time="3.064"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100420-13122019-128@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;10&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'pickup_address': 'Feurigstraße 59, 10827 Berlin, Berlin'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=128&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100420-13122019-128@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='10')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100420-13122019-128@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='10')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 157, in test_booking_update_transfer_pickup_address
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100420-13122019-128@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'pickup_address': 'Feurigstraße 59, 10827 Berlin, Berlin'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=128
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100420-13122019-128@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='10')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100420-13122019-128@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='10')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100420-13122019-128@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_using_booking_number" time="2.779"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100423-13122019-129@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;credit_card_expiry_month&quot;: &quot;03&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=129&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100423-13122019-129@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='03')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100423-13122019-129@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='03')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 58, in test_booking_update_using_booking_number
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100423-13122019-129@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "03"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=129
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100423-13122019-129@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='03')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100423-13122019-129@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', credit_card_expiry_month='03')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100423-13122019-129@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "credit_card_expiry_month": "03"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_using_external_id" time="3.109"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100426-13122019-130@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;external_id&quot;: &quot;f9a48100426-13122019&quot;, &quot;dropoff_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;07&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=130&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100426-13122019-130@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100426-13122019-130@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 69, in test_booking_update_using_external_id
    booking_response = self.get_booking_response_result(transfer_booking, external_id=True)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100426-13122019-130@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "external_id": "f9a48100426-13122019", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=130
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100426-13122019-130@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100426-13122019-130@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100426-13122019-130@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "external_id": "f9a48100426-13122019", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_using_uuid" time="2.966"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100429-13122019-131@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;09&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=131&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100429-13122019-131@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='09')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100429-13122019-131@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='09')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 47, in test_booking_update_using_uuid
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100429-13122019-131@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=131
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100429-13122019-131@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='09')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100429-13122019-131@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='09')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100429-13122019-131@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_booking_update_vehicle_type" time="2.832"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100432-13122019-132@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;dropoff_airport_iata&quot;: &quot;TXL&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;02&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'vehicle_type': 'business_class'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=132&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100432-13122019-132@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100432-13122019-132@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='02')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 123, in test_booking_update_vehicle_type
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100432-13122019-132@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "dropoff_airport_iata": "TXL", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'vehicle_type': 'business_class'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=132
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100432-13122019-132@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100432-13122019-132@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='02')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100432-13122019-132@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "dropoff_airport_iata": "TXL", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_airline_code_missing" time="3.026"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100435-13122019-133@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=133&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100435-13122019-133@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100435-13122019-133@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 407, in test_error_booking_update_airline_code_missing
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100435-13122019-133@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=133
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100435-13122019-133@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100435-13122019-133@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Feurigstraße 59, 10827 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100435-13122019-133@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Feurigstraße 59, 10827 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_depart_at_in_the_past" time="3.014"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100438-13122019-134@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=134&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100438-13122019-134@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100438-13122019-134@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 429, in test_error_booking_update_depart_at_in_the_past
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100438-13122019-134@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=134
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100438-13122019-134@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100438-13122019-134@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100438-13122019-134@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_depart_at_invalid" time="2.825"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100441-13122019-135@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=135&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100441-13122019-135@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100441-13122019-135@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 418, in test_error_booking_update_depart_at_invalid
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100441-13122019-135@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=135
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100441-13122019-135@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100441-13122019-135@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Flughafen 1, 12529 Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Leipziger Str. 3, 10117 Berlin, Berlin', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100441-13122019-135@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Flughafen 1, 12529 Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_flight_number_missing" time="3.082"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100444-13122019-136@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;06&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=136&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100444-13122019-136@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100444-13122019-136@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 396, in test_error_booking_update_flight_number_missing
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100444-13122019-136@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=136
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100444-13122019-136@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100444-13122019-136@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Friedrichstraße 58, 10117 Berlin, Berlin', credit_card_expiry_month='06')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100444-13122019-136@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "credit_card_expiry_month": "06"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_luggage_count_invalid_when_negative" time="2.985"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100447-13122019-137@example.com&quot;, &quot;luggage_count&quot;: 1, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_airport_iata&quot;: &quot;TXL&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;09&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'luggage_count': 1})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=137&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100447-13122019-137@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='09')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100447-13122019-137@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='09')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 326, in test_error_booking_update_luggage_count_invalid_when_negative
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100447-13122019-137@example.com", "luggage_count": 1, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "TXL", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'luggage_count': 1})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=137
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100447-13122019-137@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='09')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100447-13122019-137@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='09')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100447-13122019-137@example.com", "luggage_count": 1, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "TXL", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_luggage_count_invalid_when_over_limit_business_van" time="3.000"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100450-13122019-138@example.com&quot;, &quot;luggage_count&quot;: 1, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;05&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'luggage_count': 1, 'vehicle_type': 'business_van'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=138&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100450-13122019-138@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='05')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100450-13122019-138@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='05')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 374, in test_error_booking_update_luggage_count_invalid_when_over_limit_business_van
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100450-13122019-138@example.com", "luggage_count": 1, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "05"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'luggage_count': 1, 'vehicle_type': 'business_van'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=138
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100450-13122019-138@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='05')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100450-13122019-138@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='05')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100450-13122019-138@example.com", "luggage_count": 1, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "05"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_passenger_count_invalid_when_negative" time="2.998"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100453-13122019-139@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;TXL&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;passenger_count&quot;: 1, &quot;credit_card_expiry_month&quot;: &quot;09&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'passenger_count': 1})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=139&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100453-13122019-139@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=1, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='09')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100453-13122019-139@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month='09')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 315, in test_error_booking_update_passenger_count_invalid_when_negative
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100453-13122019-139@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "TXL", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "passenger_count": 1, "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'passenger_count': 1})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=139
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100453-13122019-139@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=1, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='09')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100453-13122019-139@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month='09')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100453-13122019-139@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "TXL", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "passenger_count": 1, "credit_card_expiry_month": "09"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_passenger_count_invalid_when_over_limit_business_class" time="2.972"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100456-13122019-140@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;TXL&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;passenger_count&quot;: 1, &quot;credit_card_expiry_month&quot;: &quot;07&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'passenger_count': 1, 'vehicle_type': 'business_class'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=140&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100456-13122019-140@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=1, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100456-13122019-140@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 338, in test_error_booking_update_passenger_count_invalid_when_over_limit_business_class
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100456-13122019-140@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "TXL", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "passenger_count": 1, "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'passenger_count': 1, 'vehicle_type': 'business_class'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=140
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100456-13122019-140@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=1, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100456-13122019-140@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='TXL', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100456-13122019-140@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "TXL", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "passenger_count": 1, "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_passenger_count_invalid_when_over_limit_business_van" time="2.876"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100459-13122019-141@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;passenger_count&quot;: 1, &quot;credit_card_expiry_month&quot;: &quot;10&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'passenger_count': 1, 'vehicle_type': 'business_van'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=141&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100459-13122019-141@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=1, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='10')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100459-13122019-141@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month='10')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 362, in test_error_booking_update_passenger_count_invalid_when_over_limit_business_van
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100459-13122019-141@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "passenger_count": 1, "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'passenger_count': 1, 'vehicle_type': 'business_van'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=141
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100459-13122019-141@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=1, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='10')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100459-13122019-141@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month='10')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100459-13122019-141@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "passenger_count": 1, "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_passenger_count_invalid_when_over_limit_first_class" time="4.074"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100501-13122019-142@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;passenger_count&quot;: 1, &quot;credit_card_expiry_month&quot;: &quot;12&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'passenger_count': 1, 'vehicle_type': 'first_class'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=142&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100501-13122019-142@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=1, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='12')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100501-13122019-142@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month='12')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 350, in test_error_booking_update_passenger_count_invalid_when_over_limit_first_class
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100501-13122019-142@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "passenger_count": 1, "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'passenger_count': 1, 'vehicle_type': 'first_class'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=142
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100501-13122019-142@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_count=1, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='12')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100501-13122019-142@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_address=None, dropoff_airport_iata='SXF', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', passenger_count=1, credit_card_expiry_month='12')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100501-13122019-142@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "SXF", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "passenger_count": 1, "credit_card_expiry_month": "12"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_booking_update_passenger_count_invalid_when_put_a_string" time="2.887"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100506-13122019-143@example.com&quot;, &quot;luggage_count&quot;: 1, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;SXF&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;dropoff_airport_iata&quot;: &quot;TXL&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;04&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'luggage_count': 1})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10&gt;&gt;, passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=143&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100506-13122019-143@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100506-13122019-143@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 385, in test_error_booking_update_passenger_count_invalid_when_put_a_string
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100506-13122019-143@example.com", "luggage_count": 1, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "TXL", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'luggage_count': 1})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332e10>>, passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f332fd0>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=143
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100506-13122019-143@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100506-13122019-143@example.com', luggage_count=1, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='SXF', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata='TXL', passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=None, credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100506-13122019-143@example.com", "luggage_count": 1, "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "SXF", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "depart_at": "2019-12-14T12:12:52+00:00", "dropoff_airport_iata": "TXL", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_error_update_bookings_passenger_mobile_invalid" time="2.870"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100508-13122019-144@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Feurigstraße 59, 10827 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;04&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=144&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100508-13122019-144@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='04')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100508-13122019-144@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='04')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 440, in test_error_update_bookings_passenger_mobile_invalid
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100508-13122019-144@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Feurigstraße 59, 10827 Berlin, Berlin", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=144
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100508-13122019-144@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='04')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100508-13122019-144@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Oranienstraße 20, 10999 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', credit_card_expiry_month='04')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100508-13122019-144@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Oranienstraße 20, 10999 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Feurigstraße 59, 10827 Berlin, Berlin", "credit_card_expiry_month": "04"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_flight_number_not_cancelling" time="2.973"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100511-13122019-145@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;pickup_airport_iata&quot;: &quot;JFK&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;flight_number&quot;: &quot;354&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;depart_at&quot;: &quot;2019-12-15T18:25:00-05:00&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;airline_code&quot;: &quot;DL&quot;, &quot;dropoff_address&quot;: &quot;Empire State Building&quot;, &quot;credit_card_expiry_month&quot;: &quot;02&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'dropoff_airport_iata': None, 'pickup_airport_iata': 'JFK', 'flight_number': '354', 'airline_code': 'DL', 'dropoff_address': 'Empire State Building', 'depart_at': '2019-12-15T18:25:00-05:00'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferIata'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='JFK', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', flight_number='354', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=None, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-15T18:25:00-05:00', airline_code='DL', dropoff_address='Empire State Building', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=145&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100511-13122019-145@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='JFK', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', flight_number='354', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=None, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-15T18:25:00-05:00', airline_code='DL', dropoff_address='Empire State Building', credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100511-13122019-145@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='JFK', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', flight_number='354', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=None, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-15T18:25:00-05:00', airline_code='DL', dropoff_address='Empire State Building', credit_card_expiry_month='02')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 240, in test_flight_number_not_cancelling
    booking_response = self.get_booking_response_result(airport_pickup)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100511-13122019-145@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "JFK", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "flight_number": "354", "vehicle_type": "business_van", "depart_at": "2019-12-15T18:25:00-05:00", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "airline_code": "DL", "dropoff_address": "Empire State Building", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferIata(extra={'dropoff_airport_iata': None, 'pickup_airport_iata': 'JFK', 'flight_number': '354', 'airline_code': 'DL', 'dropoff_address': 'Empire State Building', 'depart_at': '2019-12-15T18:25:00-05:00'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferIata'>: reusing sequence from <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='JFK', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', flight_number='354', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=None, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-15T18:25:00-05:00', airline_code='DL', dropoff_address='Empire State Building', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=145
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100511-13122019-145@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='JFK', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', flight_number='354', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=None, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-15T18:25:00-05:00', airline_code='DL', dropoff_address='Empire State Building', credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferIata(passenger_email='QA-100511-13122019-145@example.com', payment_method_uuid=None, credit_card_holder='Radisch', pickup_airport_iata='JFK', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', flight_number='354', credit_card_number=4111111111111111, credit_card_expiry_year=2024, dropoff_airport_iata=None, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address=None, passenger_last_name='Dennis', depart_at='2019-12-15T18:25:00-05:00', airline_code='DL', dropoff_address='Empire State Building', credit_card_expiry_month='02')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100511-13122019-145@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "pickup_airport_iata": "JFK", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "flight_number": "354", "vehicle_type": "business_van", "depart_at": "2019-12-15T18:25:00-05:00", "passenger_mobile": "+491701234567", "credit_card_expiry_year": 2024, "credit_card_cvv": "123", "passenger_last_name": "Dennis", "airline_code": "DL", "dropoff_address": "Empire State Building", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_passenger_information_not_cancelling" time="2.868"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100514-13122019-146@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;08&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=146&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100514-13122019-146@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='08')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100514-13122019-146@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='08')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 254, in test_passenger_information_not_cancelling
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100514-13122019-146@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=146
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100514-13122019-146@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='08')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100514-13122019-146@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Popitzweg 59, 13629 Berlin, Germany', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', credit_card_expiry_month='08')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100514-13122019-146@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Popitzweg 59, 13629 Berlin, Germany", "passenger_last_name": "Dennis", "dropoff_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "credit_card_expiry_month": "08"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_price_items_in_response" time="2.811"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100517-13122019-147@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Flughafen 1, 12529 Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;10&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=147&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100517-13122019-147@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='10')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100517-13122019-147@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='10')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 80, in test_price_items_in_response
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100517-13122019-147@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=147
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100517-13122019-147@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='10')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100517-13122019-147@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Flughafen 1, 12529 Berlin', credit_card_expiry_month='10')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100517-13122019-147@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Flughafen 1, 12529 Berlin", "credit_card_expiry_month": "10"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_price_items_voucher_in_response" time="2.939"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100520-13122019-148@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Popitzweg 59, 13629 Berlin, Germany&quot;, &quot;voucher_code&quot;: &quot;FREE&quot;, &quot;credit_card_expiry_month&quot;: &quot;03&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'voucher_code': 'FREE'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, voucher_code='FREE', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=148&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100520-13122019-148@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', voucher_code='FREE', credit_card_expiry_month='03')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100520-13122019-148@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', voucher_code='FREE', credit_card_expiry_month='03')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 90, in test_price_items_voucher_in_response
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100520-13122019-148@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "voucher_code": "FREE", "credit_card_expiry_month": "03"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={'voucher_code': 'FREE'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, voucher_code='FREE', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=148
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100520-13122019-148@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', voucher_code='FREE', credit_card_expiry_month='03')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100520-13122019-148@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Popitzweg 59, 13629 Berlin, Germany', voucher_code='FREE', credit_card_expiry_month='03')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100520-13122019-148@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Popitzweg 59, 13629 Berlin, Germany", "voucher_code": "FREE", "credit_card_expiry_month": "03"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_try_to_update_service_type_transfer_and_duration" time="2.923"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100523-13122019-149@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_van&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 7200, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Leipziger Str. 3, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;02&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=149&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100523-13122019-149@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=7200, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100523-13122019-149@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=7200, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 195, in test_try_to_update_service_type_transfer_and_duration
    booking_response = self.get_booking_response_result(hourly_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100523-13122019-149@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 7200, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=149
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100523-13122019-149@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_van', duration=7200, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100523-13122019-149@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=7200, passenger_mobile='+491701234567', vehicle_type='business_van', credit_card_cvv='123', pickup_address='Leipziger Str. 3, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='02')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100523-13122019-149@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_van", "credit_card_expiry_year": 2024, "duration": 7200, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Leipziger Str. 3, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "02"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_update_date_time_in_another_timezone" time="2.940"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100526-13122019-150@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;transfer&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;first_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Friedrichstraße 58, 10117 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;dropoff_address&quot;: &quot;Oranienstraße 20, 10999 Berlin, Berlin&quot;, &quot;credit_card_expiry_month&quot;: &quot;01&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsTransferFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0&gt;&gt;, credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=150&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100526-13122019-150@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='01')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100526-13122019-150@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='01')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 272, in test_update_date_time_in_another_timezone
    booking_response = self.get_booking_response_result(transfer_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100526-13122019-150@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "credit_card_expiry_month": "01"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsTransferFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsTransferFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e5c0>>, credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=150
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100526-13122019-150@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='first_class', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='01')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsTransferFactory(passenger_email='QA-100526-13122019-150@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='transfer', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, passenger_mobile='+491701234567', vehicle_type='first_class', credit_card_cvv='123', pickup_address='Friedrichstraße 58, 10117 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', dropoff_address='Oranienstraße 20, 10999 Berlin, Berlin', credit_card_expiry_month='01')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100526-13122019-150@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "transfer", "passenger_first_name": "Dennis", "vehicle_type": "first_class", "credit_card_expiry_year": 2024, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Friedrichstraße 58, 10117 Berlin, Berlin", "passenger_last_name": "Dennis", "dropoff_address": "Oranienstraße 20, 10999 Berlin, Berlin", "credit_card_expiry_month": "01"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_update_duration_of_hourly_booking" time="3.002"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100529-13122019-151@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;ms&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: &quot;7200&quot;, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;11&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'duration': '7200'})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration='7200', passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=151&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100529-13122019-151@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', duration='7200', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100529-13122019-151@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration='7200', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 183, in test_update_duration_of_hourly_booking
    booking_response = self.get_booking_response_result(hourly_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100529-13122019-151@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": "7200", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={'duration': '7200'})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration='7200', passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=151
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100529-13122019-151@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', duration='7200', passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100529-13122019-151@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='ms', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration='7200', passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='11')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100529-13122019-151@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "ms", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": "7200", "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "11"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_bookings_update.TestBlacklaneUpdateBooking" name="test_update_service_type_to_same_value" time="2.844"><failure type="builtins.AssertionError" message="&#10;Expected: a dictionary containing key 'result'&#10;     but: was &lt;{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X PUT -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{&quot;passenger_email&quot;: &quot;QA-100532-13122019-152@example.com&quot;, &quot;credit_card_number&quot;: 4111111111111111, &quot;credit_card_holder&quot;: &quot;Radisch&quot;, &quot;passenger_title&quot;: &quot;mr&quot;, &quot;service_type&quot;: &quot;hourly&quot;, &quot;passenger_first_name&quot;: &quot;Dennis&quot;, &quot;vehicle_type&quot;: &quot;business_class&quot;, &quot;credit_card_expiry_year&quot;: 2024, &quot;duration&quot;: 21600, &quot;passenger_mobile&quot;: &quot;+491701234567&quot;, &quot;depart_at&quot;: &quot;2019-12-14T12:12:52+00:00&quot;, &quot;credit_card_cvv&quot;: &quot;123&quot;, &quot;pickup_address&quot;: &quot;Kronprinzessinnenweg 250, 14109 Berlin, Berlin&quot;, &quot;passenger_last_name&quot;: &quot;Dennis&quot;, &quot;credit_card_expiry_month&quot;: &quot;07&quot;}'&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;&#10;factory.generate: DEBUG: &lt;class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'&gt;: reusing sequence from &lt;class 'factories.athena.bookings_factory.UserBookingsFactory'&gt;&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=&lt;DeclarationWrapper for &lt;factory.declarations.Sequence object at 0x7f9e3f332e48&gt;&gt;, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8&gt;&gt;, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390&gt;&gt;, passenger_mobile='+491701234567', vehicle_type=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128&gt;&gt;, credit_card_cvv='123', pickup_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8&gt;&gt;, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8&gt;&gt;)&#10;factory.generate: DEBUG: Sequence: Computing next value of &lt;function PassengerFactory.&lt;lambda&gt; at 0x7f9e3f3297b8&gt; for seq=152&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100532-13122019-152@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', duration=21600, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='07')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100532-13122019-152@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=21600, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='07')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;POST /rest/v1.0/bookings HTTP/1.1&quot; 500 97&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_bookings_update.py", line 206, in test_update_service_type_to_same_value
    booking_response = self.get_booking_response_result(hourly_booking)
  File "/app/tests/test_athena/test_athena_bookings_update.py", line 47, in get_booking_response_result
    assert_that(self.api.response, has_key(RESULT))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: a dictionary containing key 'result'
     but: was <{'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100532-13122019-152@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": 21600, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.bookings_factory.GuestBookingsHourlyFactory(extra={})
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.GuestBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>
factory.generate: DEBUG: <class 'factories.athena.bookings_factory.UserBookingsHourlyFactory'>: reusing sequence from <class 'factories.athena.bookings_factory.UserBookingsFactory'>
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email=<DeclarationWrapper for <factory.declarations.Sequence object at 0x7f9e3f332e48>>, payment_method_uuid=None, credit_card_holder='Radisch', passenger_title=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3327b8>>, service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=<DeclarationWrapper for <factory.fuzzy.FuzzyInteger object at 0x7f9e3f33e390>>, passenger_mobile='+491701234567', vehicle_type=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e128>>, credit_card_cvv='123', pickup_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f3329e8>>, passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3f33e0b8>>)
factory.generate: DEBUG: Sequence: Computing next value of <function PassengerFactory.<lambda> at 0x7f9e3f3297b8> for seq=152
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100532-13122019-152@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, vehicle_type='business_class', duration=21600, passenger_mobile='+491701234567', credit_card_expiry_year=2024, credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='07')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.bookings_factory.GuestBookingsHourlyFactory(passenger_email='QA-100532-13122019-152@example.com', payment_method_uuid=None, credit_card_holder='Radisch', passenger_title='mr', service_type='hourly', passenger_first_name='Dennis', credit_card_number=4111111111111111, credit_card_expiry_year=2024, duration=21600, passenger_mobile='+491701234567', vehicle_type='business_class', credit_card_cvv='123', pickup_address='Kronprinzessinnenweg 250, 14109 Berlin, Berlin', passenger_last_name='Dennis', depart_at='2019-12-14T12:12:52+00:00', credit_card_expiry_month='07')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "POST /rest/v1.0/bookings HTTP/1.1" 500 97
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X PUT -H "Content-Type: application/json" -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/bookings -d'{"passenger_email": "QA-100532-13122019-152@example.com", "credit_card_number": 4111111111111111, "credit_card_holder": "Radisch", "passenger_title": "mr", "service_type": "hourly", "passenger_first_name": "Dennis", "vehicle_type": "business_class", "credit_card_expiry_year": 2024, "duration": 21600, "passenger_mobile": "+491701234567", "depart_at": "2019-12-14T12:12:52+00:00", "credit_card_cvv": "123", "pickup_address": "Kronprinzessinnenweg 250, 14109 Berlin, Berlin", "passenger_last_name": "Dennis", "credit_card_expiry_month": "07"}'


RESPONSE {'errors': [{'message': 'internal_server_error', 'description': 'Internal Server Error'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_depart_at_invalid" time="0.100"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_depart_at_missing" time="0.116"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_depart_at_no_prices_found" time="0.199"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_duration_missing" time="0.120"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_hourly_dropoff_missing" time="0.102"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_hourly_duration_negative" time="0.120"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_hourly_duration_non_integer" time="0.143"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_hourly_duration_under_7200" time="0.143"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_hourly_duration_zero" time="0.134"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_hourly_pickup_invalid" time="0.161"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_invalid_token" time="0.123"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_missing_token" time="0.000"><error type="builtins.AttributeError" message="'TestAthenaGETPricesUntrusted' object has no attribute 'test_missing_token'&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;RESPONSE {}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_prices.py", line 88, in test_error_missing_token
    return self.bl.test_missing_token()
'TestAthenaGETPricesUntrusted' object has no attribute 'test_missing_token'
-------------------- >> begin captured stdout << ---------------------


RESPONSE {}

--------------------- >> end captured stdout << ----------------------]]></error><system-out><![CDATA[

RESPONSE {}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_service_type_invalid" time="0.101"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_service_type_missing" time="0.103"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_transfer_depart_at_in_the_past" time="0.202"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_transfer_dropoff_invalid" time="0.205"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_transfer_dropoff_missing" time="0.122"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_transfer_pickup_invalid" time="0.175"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_transfer_pickup_missing" time="0.123"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_transfer_too_early" time="0.190"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_error_transfer_voucher_code_invalid" time="0.261"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_get_prices_transfer_address" time="0.254"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_get_prices_transfer_coordinates_dropoff_missing" time="0.101"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_get_prices_transfer_coordinates_pickup_missing" time="0.118"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_get_prices_transfer_iata_codes" time="0.221"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_get_prices_transfer_latlong" time="0.412"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesCommon" name="test_get_prices_transfer_with_voucher_code" time="0.296"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesTrusted" name="test_airport_fee_airport_coordinates" time="0.264"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesTrusted" name="test_airport_fee_train_station_coordinates" time="0.195"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesTrusted" name="test_get_prices_with_place_id_hourly_response_code" time="0.172"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesTrusted" name="test_get_prices_with_place_id_keys" time="0.253"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesTrusted" name="test_get_prices_with_place_id_transfer_response_code" time="0.262"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesTrusted" name="test_no_airport_fee_for_dropoff_airport_coordinates" time="0.211"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesTrusted" name="test_prices_transfer_no_airport_fee_for_address_coordinates" time="0.462"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_airport_fee_not_present_for_dropoff" time="0.237"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_airport_fee_when_sending_pickup_airport_address" time="0.182"><failure type="builtins.AssertionError" message="&#10;Expected: &lt;200&gt;&#10;     but: was &lt;422&gt;&#10;&#10;-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------&#10;&#10;&#10;REQUEST curl -X GET -H &quot;Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh&quot; https://proteus-auto.blacklane.io/rest/v1.0/prices?service_type=transfer&amp;dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&amp;depart_at=2021-10-22T09%3A58%3A24&amp;pickup_address=Flughafen+Sch%C3%B6nefeld%2C+12521+Berlin%2C+Germany&#10;&#10;&#10;RESPONSE {'errors': [{'message': 'pickup_invalid', 'description': 'The provided pickup location could not be resolved to an address.'}]}&#10;&#10;--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------&#10;-------------------- &gt;&gt; begin captured logging &lt;&lt; --------------------&#10;factory.generate: DEBUG: BaseFactory: Preparing factories.athena.prices_factory.TransferFactory(extra={'pickup_address': 'Flughafen Schönefeld, 12521 Berlin, Germany'})&#10;factory.containers: DEBUG: LazyStub: Computing values for factories.athena.prices_factory.TransferFactory(service_type='transfer', dropoff_address=&lt;DeclarationWrapper for &lt;factory.fuzzy.FuzzyChoice object at 0x7f9e3e6ef358&gt;&gt;, depart_at='2021-10-22T09:58:24', pickup_address='Flughafen Schönefeld, 12521 Berlin, Germany')&#10;factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.prices_factory.TransferFactory(service_type='transfer', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', depart_at='2021-10-22T09:58:24', pickup_address='Flughafen Schönefeld, 12521 Berlin, Germany')&#10;factory.generate: DEBUG: BaseFactory: Generating factories.athena.prices_factory.TransferFactory(service_type='transfer', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', depart_at='2021-10-22T09:58:24', pickup_address='Flughafen Schönefeld, 12521 Berlin, Germany')&#10;requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io&#10;requests.packages.urllib3.connectionpool: DEBUG: &quot;GET /rest/v1.0/prices?service_type=transfer&amp;dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&amp;depart_at=2021-10-22T09%3A58%3A24&amp;pickup_address=Flughafen+Sch%C3%B6nefeld%2C+12521+Berlin%2C+Germany HTTP/1.1&quot; 422 127&#10;--------------------- &gt;&gt; end captured logging &lt;&lt; ---------------------"><![CDATA[  File "/usr/local/lib/python3.5/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/local/lib/python3.5/unittest/case.py", line 605, in run
    testMethod()
  File "/app/tests/test_blacklane/test_blacklane_prices.py", line 181, in test_airport_fee_when_sending_pickup_airport_address
    assert_that(self.api.code, equal_to(200))
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File "/usr/local/lib/python3.5/site-packages/hamcrest/core/assert_that.py", line 57, in _assert_match
    raise AssertionError(description)

Expected: <200>
     but: was <422>

-------------------- >> begin captured stdout << ---------------------


REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/prices?service_type=transfer&dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&depart_at=2021-10-22T09%3A58%3A24&pickup_address=Flughafen+Sch%C3%B6nefeld%2C+12521+Berlin%2C+Germany


RESPONSE {'errors': [{'message': 'pickup_invalid', 'description': 'The provided pickup location could not be resolved to an address.'}]}

--------------------- >> end captured stdout << ----------------------
-------------------- >> begin captured logging << --------------------
factory.generate: DEBUG: BaseFactory: Preparing factories.athena.prices_factory.TransferFactory(extra={'pickup_address': 'Flughafen Schönefeld, 12521 Berlin, Germany'})
factory.containers: DEBUG: LazyStub: Computing values for factories.athena.prices_factory.TransferFactory(service_type='transfer', dropoff_address=<DeclarationWrapper for <factory.fuzzy.FuzzyChoice object at 0x7f9e3e6ef358>>, depart_at='2021-10-22T09:58:24', pickup_address='Flughafen Schönefeld, 12521 Berlin, Germany')
factory.containers: DEBUG: LazyStub: Computed values, got factories.athena.prices_factory.TransferFactory(service_type='transfer', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', depart_at='2021-10-22T09:58:24', pickup_address='Flughafen Schönefeld, 12521 Berlin, Germany')
factory.generate: DEBUG: BaseFactory: Generating factories.athena.prices_factory.TransferFactory(service_type='transfer', dropoff_address='Feurigstraße 59, 10827 Berlin, Berlin', depart_at='2021-10-22T09:58:24', pickup_address='Flughafen Schönefeld, 12521 Berlin, Germany')
requests.packages.urllib3.connectionpool: INFO: Starting new HTTPS connection (1): proteus-auto.blacklane.io
requests.packages.urllib3.connectionpool: DEBUG: "GET /rest/v1.0/prices?service_type=transfer&dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&depart_at=2021-10-22T09%3A58%3A24&pickup_address=Flughafen+Sch%C3%B6nefeld%2C+12521+Berlin%2C+Germany HTTP/1.1" 422 127
--------------------- >> end captured logging << ---------------------]]></failure><system-out><![CDATA[

REQUEST curl -X GET -H "Authorization: Bearer KjThqYb5d0rc17Aa9SbWyKyRV0mZIJOh" https://proteus-auto.blacklane.io/rest/v1.0/prices?service_type=transfer&dropoff_address=Feurigstra%C3%9Fe+59%2C+10827+Berlin%2C+Berlin&depart_at=2021-10-22T09%3A58%3A24&pickup_address=Flughafen+Sch%C3%B6nefeld%2C+12521+Berlin%2C+Germany


RESPONSE {'errors': [{'message': 'pickup_invalid', 'description': 'The provided pickup location could not be resolved to an address.'}]}
]]></system-out></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_airport_fee_when_sending_pickup_airport_coordinates" time="0.380"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_airport_fee_when_sending_pickup_train_station_coordinates" time="0.393"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_corporation_uuid_rebate_amount" time="0.224"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_fixed_markup_is_applied_for_transfer" time="0.514"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_fixed_rebate_is_applied_for_transfer" time="0.548"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_fixed_rebate_or_markup_hourly_1__NT_uuid__b3e04fc1_b1b8_4780_8de8_a5ba68fa73b2___name__CorporationFixedRebate30____3000_" time="0.405"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_fixed_rebate_or_markup_hourly_2__NT_uuid__de457330_39ae_43ae_a7b7_1338b288be3e___name__CorporationFixedMarkup30_____3000_" time="0.429"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_get_prices_hourly_common_keys" time="0.201"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_get_prices_results_contain_keys" time="0.242"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_get_prices_transfer_common_keys" time="0.246"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_get_prices_with_place_id_keys" time="0.241"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_get_prices_with_place_id_response_code" time="0.255"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_type_rebate_in_response" time="0.219"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_type_rebate_in_response_for_fixed_rebate" time="0.226"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_type_service_fee_not_in_response_fixed_markup" time="0.271"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_type_voucher_in_response" time="0.296"></testcase><testcase classname="app.tests.test_blacklane.test_blacklane_prices.TestBlacklaneGetPricesUntrusted" name="test_voucher_amount" time="0.253"></testcase></testsuite>